(window.webpackJsonpcashtab=window.webpackJsonpcashtab||[]).push([[2],{112:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return x}));var r=n(132),a=n(43),o=n(44),c=n(49),i=n(50),s=n(22),u=n(14),l=u.MTX,p=u.consensus,f=u.Script.hashType,d=u.script,h=(d.SLP,d.common.opcodes,n(189).Hash256),b=n(59),m=b.i64,g=(b.u64,[{tokenId:"7e7dacd72dcdb14e00a03dd3aff47f019ed51a6f1f4e4f532ae50692f62bc4e5",pubkey:"027e6cf8229495afadcb5a7e40365bbc82afcf145eacca3193151e68a61fc81743",imageUrl:"https://bux.digital/assets/img/favicon/favicon-32x32.png"},{tokenId:"52b12c03466936e7e3b2dcfcff847338c53c611ba8ab74dd8e4dadf7ded12cf6",imageUrl:"https://bux.digital/assets/img/favicon/favicon-32x32.png"}]),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(new u.Script).pushSym("2dup").pushInt(36).pushSym("split").pushSym("drop");return t&&(n.pushSym("dup"),n.pushInt(6),n.pushSym("pick"),n.pushInt(104),n.pushSym("split"),n.pushSym("drop"),n.pushInt(68),n.pushSym("split"),n.pushSym("nip"),n.pushSym("equalverify")),n.pushSym("swap").pushSym("dup").pushInt(78).pushSym("split").pushSym("nip").pushInt(20).pushSym("split").pushSym("drop").pushInt(7).pushSym("pick").pushSym("hash160").pushSym("equalverify").pushInt(132).pushSym("split").pushSym("drop").pushSym("cat").pushInt(3).pushSym("roll").pushSym("swap").pushData(e).pushSym("checkdatasigverify").pushInt(2).pushSym("roll").pushSym("dup").pushSym("size").pushInt(40).pushSym("sub").pushSym("split").pushSym("swap").pushInt(4).pushSym("split").pushSym("nip").pushInt(32).pushSym("split").pushSym("drop").pushInt(3).pushSym("roll").pushSym("hash256").pushSym("equalverify").pushInt(32).pushSym("split").pushSym("drop").pushSym("rot").pushSym("hash256").pushSym("equalverify").pushSym("sha256").pushSym("3dup").pushSym("rot").pushSym("size").pushSym("1sub").pushSym("split").pushSym("drop").pushSym("swap").pushSym("rot").pushSym("checkdatasigverify").pushSym("drop").pushSym("checksig").compile(),n},x=function(t){Object(c.a)(u,t);var n=Object(i.a)(u);function u(e){return Object(a.a)(this,u),n.call(this,e)}return Object(o.a)(u,[{key:"getPreimage",value:function(t,n,a,o){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.inputs[t],u=p.ZERO_HASH,l=p.ZERO_HASH,d=p.ZERO_HASH;if(!(o&f.ANYONECANPAY))if(this._hashPrevouts)u=this._hashPrevouts;else{var b,g=s.pool(36*this.inputs.length),v=Object(r.a)(this.inputs);try{for(v.s();!(b=v.n()).done;){b.value.prevout.toWriter(g)}}catch(N){v.e(N)}finally{v.f()}if(c){var x=this.inputs.map((function(e){return e.prevout.toRaw()}));u=e.concat(x)}else u=h.digest(g.render());this.mutable||c||(this._hashPrevouts=u)}if(!(o&f.ANYONECANPAY)&&(31&o)!==f.SINGLE&&(31&o)!==f.NONE)if(this._hashSequence)l=this._hashSequence;else{var w,y=s.pool(4*this.inputs.length),k=Object(r.a)(this.inputs);try{for(k.s();!(w=k.n()).done;){var O=w.value;y.writeU32(O.sequence)}}catch(N){k.e(N)}finally{k.f()}l=c?y.render():h.digest(y.render()),this.mutable||c||(this._hashSequence=l)}if((31&o)!==f.SINGLE&&(31&o)!==f.NONE)if(this._hashOutputs)d=this._hashOutputs;else{var S,j=0,E=Object(r.a)(this.outputs);try{for(E.s();!(S=E.n()).done;){j+=S.value.getSize()}}catch(N){E.e(N)}finally{E.f()}var I,P=s.pool(j),A=Object(r.a)(this.outputs);try{for(A.s();!(I=A.n()).done;){I.value.toWriter(P)}}catch(N){A.e(N)}finally{A.f()}if(c){var R=this.outputs.map((function(e){return e.toRaw()}));d=e.concat(R)}else d=h.digest(P.render());this.mutable||c||(this._hashOutputs=d)}else if((31&o)===f.SINGLE&&t<this.outputs.length){var T=this.outputs[t];d=c?T.toRaw():h.digest(T.toRaw())}if(c){var C=e.alloc(4);C.writeUInt32LE(this.locktime);var B=e.alloc(4);return B.writeUInt32LE(o),{version:this.version,prevouts:u,sequences:l,outpoint:i.prevout.toRaw(),scriptCode:n.toRaw(),inputValue:m.fromInt(a).toLE(e),inputSequence:i.sequence,outputs:d,locktime:C,type:B}}var D=156+n.getVarSize(),U=s.pool(D);return U.writeU32(this.version),U.writeBytes(u),U.writeBytes(l),U.writeHash(i.prevout.hash),U.writeU32(i.prevout.index),U.writeVarBytes(n.toRaw()),U.writeI64(a),U.writeU32(i.sequence),U.writeBytes(d),U.writeU32(this.locktime),U.writeU32(o),U.render()}}]),u}(l)}).call(this,n(4).Buffer)},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"g",(function(){return g}));var r=n.p+"static/media/logo_primary.eb3ad13b.png",a=n.p+"static/media/logo_secondary.c38d759b.png",o=n(57),c=n.n(o),i=n(29),s=n.n(i),u={name:"eCash",ticker:"XEC",appUrl:"cashtab.com",logo:r,legacyPrefix:"bitcoincash",prefixes:["ecash"],coingeckoId:"ecash",defaultFee:1.01,dustSats:550,etokenSats:546,cashDecimals:2,blockExplorerUrl:"https://explorer.bitcoinabc.org",tokenExplorerUrl:"https://explorer.cert.cash",blockExplorerUrlTestnet:"https://texplorer.bitcoinabc.org",tokenName:"eToken",tokenTicker:"eToken",tokenIconSubmitApi:"https://icons.etokens.cash/new",tokenLogo:a,tokenPrefixes:["etoken"],tokenIconsUrl:"https://etoken-icons.s3.us-west-2.amazonaws.com",postageUrl:"https://pay.badger.cash/postage",txHistoryCount:5,hydrateUtxoBatchSize:20,defaultSettings:{fiatCurrency:"usd"},notificationDurationShort:3,notificationDurationLong:5,newTokenDefaultUrl:"https://cashtab.com/",opReturn:{opReturnPrefixHex:"6a",opReturnPushDataHex:"04",opReturnAppPrefixLengthHex:"04",appPrefixesHex:{eToken:"534c5000",cashtab:"00746162"}},settingsValidation:{fiatCurrency:["usd","idr","krw","cny","zar","vnd","cad","nok","eur","gbp","jpy","try","rub","inr","brl","php","ils","clp","twd","hkd","bhd","sar","aud","nzd"]},fiatCurrencies:{usd:{name:"US Dollar",symbol:"$",slug:"usd"},aud:{name:"Australian Dollar",symbol:"$",slug:"aud"},bhd:{name:"Bahraini Dinar",symbol:"BD",slug:"bhd"},brl:{name:"Brazilian Real",symbol:"R$",slug:"brl"},gbp:{name:"British Pound",symbol:"\xa3",slug:"gbp"},cad:{name:"Canadian Dollar",symbol:"$",slug:"cad"},clp:{name:"Chilean Peso",symbol:"$",slug:"clp"},cny:{name:"Chinese Yuan",symbol:"\u5143",slug:"cny"},eur:{name:"Euro",symbol:"\u20ac",slug:"eur"},hkd:{name:"Hong Kong Dollar",symbol:"HK$",slug:"hkd"},inr:{name:"Indian Rupee",symbol:"\u20b9",slug:"inr"},idr:{name:"Indonesian Rupiah",symbol:"Rp",slug:"idr"},ils:{name:"Israeli Shekel",symbol:"\u20aa",slug:"ils"},jpy:{name:"Japanese Yen",symbol:"\xa5",slug:"jpy"},krw:{name:"Korean Won",symbol:"\u20a9",slug:"krw"},nzd:{name:"New Zealand Dollar",symbol:"$",slug:"nzd"},nok:{name:"Norwegian Krone",symbol:"kr",slug:"nok"},php:{name:"Philippine Peso",symbol:"\u20b1",slug:"php"},rub:{name:"Russian Ruble",symbol:"\u0440.",slug:"rub"},twd:{name:"New Taiwan Dollar",symbol:"NT$",slug:"twd"},sar:{name:"Saudi Riyal",symbol:"SAR",slug:"sar"},zar:{name:"South African Rand",symbol:"R",slug:"zar"},try:{name:"Turkish Lira",symbol:"\u20ba",slug:"try"},vnd:{name:"Vietnamese \u0111\u1ed3ng",symbol:"\u0111",slug:"vnd"}},selfMintTokens:["7e7dacd72dcdb14e00a03dd3aff47f019ed51a6f1f4e4f532ae50692f62bc4e5"]};function l(){return u.opReturn.opReturnPrefixHex+u.opReturn.opReturnAppPrefixLengthHex+u.opReturn.appPrefixesHex.cashtab}function p(e){return!(!e||"string"!==typeof e)&&e.startsWith(l())}function f(e){if(!e||"string"!==typeof e)return"";var t=e.replace(l(),"");return t=t.slice(2)}function d(e){return e&&"string"===typeof e?e.slice(4):""}function h(e){for(var t=0;t<u.prefixes.length;t+=1)if(e.startsWith(u.prefixes[t]+":")||!e.includes(":"))return!0;return!1}function b(e){for(var t=0;t<u.tokenPrefixes.length;t+=1)if(e.startsWith(u.tokenPrefixes[t]+":"))return!0;return!1}function m(e){var t=[];try{if(null===e||void 0===e||!e.length||""===e)throw new Error("Invalid addressArray input");for(var n=e.length,r=0;r<n;r++){var a=void 0,o=e[r].split(","),i=o[0],s=o[1];if(!h(i))throw console.log("Error: ".concat(i," is not a cash address")),new Error("Address prefix is not a valid cash address with a prefix from the Ticker.prefixes array");a=i.includes(":")?i:u.legacyPrefix+":"+i;var l=c.a.decode(a),p=l.type,f=l.hash,d=c.a.encode(u.prefixes[0],p,f)+","+s+"\n";t.push(d)}}catch(b){return b}return t}function g(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={address:"",isValid:!1,queryString:null,amount:null},a=e.split("?"),o=a[0];r.address=o;try{var i=c.a.decode(o).prefix;t=!(!n&&!u.prefixes.includes(i)||n&&!u.tokenPrefixes.includes(i))}catch(d){t=!1}r.isValid=t;var l=null,p=null;if(a.length>1){l=a[1],r.queryString=l;var f=new URLSearchParams(l);if(f.has("amount"))try{p=new s.a(parseInt(f.get("amount"))).div(Math.pow(10,u.cashDecimals)).toString()}catch(d){p=null}}return r.amount=p,r}},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var r,a,o,c=n(31),i=n(37),s=n(36),u=["disabled"],l=s.d.button(r||(r=Object(i.a)(["\n    border: none;\n    color: ",";\n    background-image: ",";\n    transition: all 0.5s ease;\n    background-size: 200% auto;\n    font-size: 18px;\n    width: 100%;\n    padding: 20px 0;\n    border-radius: 4px;\n    margin-bottom: 20px;\n    cursor: pointer;\n    :hover {\n        background-position: right center;\n        -webkit-box-shadow: ",";\n        -moz-box-shadow: ",";\n        box-shadow: ",";\n    }\n    svg {\n        fill: ",";\n    }\n    @media (max-width: 768px) {\n        font-size: 16px;\n        padding: 15px 0;\n    }\n"])),(function(e){return e.theme.buttons.primary.color}),(function(e){return e.theme.buttons.primary.backgroundImage}),(function(e){return e.theme.buttons.primary.hoverShadow}),(function(e){return e.theme.buttons.primary.hoverShadow}),(function(e){return e.theme.buttons.primary.hoverShadow}),(function(e){return e.theme.buttons.primary.color})),p=s.d.button(a||(a=Object(i.a)(["\n    border: none;\n    color: ",";\n    background: ",";\n    transition: all 0.5s ease;\n    font-size: 18px;\n    width: 100%;\n    padding: 15px 0;\n    border-radius: 4px;\n    cursor: pointer;\n    outline: none;\n    margin-bottom: 20px;\n    :hover {\n        -webkit-box-shadow: ",";\n        -moz-box-shadow: ",";\n        box-shadow: ",";\n    }\n    svg {\n        fill: ",";\n    }\n    @media (max-width: 768px) {\n        font-size: 16px;\n        padding: 12px 0;\n    }\n"])),(function(e){return e.theme.buttons.secondary.color}),(function(e){return e.theme.buttons.secondary.background}),(function(e){return e.theme.buttons.secondary.hoverShadow}),(function(e){return e.theme.buttons.secondary.hoverShadow}),(function(e){return e.theme.buttons.secondary.hoverShadow}),(function(e){return e.theme.buttons.secondary.color})),f=s.d.button(o||(o=Object(i.a)(["\n    ","\n\n    border: none;\n    transition: all 0.5s ease;\n    font-size: 18px;\n    width: 100%;\n    padding: 15px 0;\n    border-radius: 4px;\n    cursor: pointer;\n    outline: none;\n    margin-bottom: 20px;\n\n    @media (max-width: 768px) {\n        font-size: 16px;\n        padding: 12px 0;\n    }\n"])),(function(e){var t=e.disabled,n=void 0!==t&&t,r=Object(c.a)(e,u);return!0===n?"\n                background-image: 'none';\n                color: ".concat(r.theme.buttons.secondary.color,";\n                background: ").concat(r.theme.buttons.secondary.background,";\n                :hover {\n                    -webkit-box-shadow: 0px 3px 10px -5px rgba(0, 0, 0, 0.75);\n                    -moz-box-shadow: 0px 3px 10px -5px rgba(0, 0, 0, 0.75);\n                    box-shadow: 0px 3px 10px -5px rgba(0, 0, 0, 0.75);\n                }\n                svg {\n                    fill: ").concat(r.theme.buttons.secondary.color,";\n                }\n            "):"\n                background-image: ".concat(r.theme.buttons.primary.backgroundImage,";\n                color: ").concat(r.theme.buttons.primary.color,";\n                :hover {\n                    background-position: right center;\n                    -webkit-box-shadow: ").concat(r.theme.buttons.primary.hoverShadow,";\n                    -moz-box-shadow: ").concat(r.theme.buttons.primary.hoverShadow,";\n                    box-shadow: ").concat(r.theme.buttons.primary.hoverShadow,";\n                }\n                svg {\n                    fill: ").concat(r.theme.buttons.primary.color,";\n                }\n            ")}));t.c=l},195:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return p}));var r=n(7),a=n(17),o=n(8),c=n(153),i=function(e){if("string"!==typeof e)return null;var t=e.split("="),n=Object(o.a)(t,2),r=n[0],a=n[1];return"r"===r?function(e){try{var t=new URL(e);if("https:"===t.protocol)return t.href}catch(n){return null}return null}(a):null},s=function(e,t){return new Promise((function(n,r){var a=new XMLHttpRequest;a.open("GET",e,!0),Object.entries(t).forEach((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];a.setRequestHeader(n,r)})),a.responseType="arraybuffer",a.onload=function(e){var t=a.response;t&&n(t)},a.onerror=function(e){console.warn(e),r(e)},a.send(null)}))},u=function(e,t,n){return new Promise((function(r,a){var c=new XMLHttpRequest;c.open("POST",e,!0),Object.entries(t).forEach((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];c.setRequestHeader(n,r)})),c.responseType="arraybuffer",c.onload=function(e){var t=c.response;if(400===c.status||404===c.status||500===c.status||402===c.status)return console.log(c),void a(new Error("Error processing payment, please check with the merchant and try again later.",{cause:{code:c.status}}));t&&r(t)},c.onerror=function(e){console.warn(e),a(e)},c.send(n)}))},l=function(){var t=Object(a.a)(Object(r.a)().mark((function t(n,a){var o,i,u,l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={Accept:"application/".concat(a,"-paymentrequest"),"Content-Type":"application/octet-stream"},console.log("headers",i),t.prev=2,t.next=5,s(n,i);case 5:u=t.sent,l=e.from(u),o=c.PaymentRequest.fromRaw(l),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),console.log(t.t0),new Error("Error fetching Payment Request");case 14:if(o.verifyChain()){t.next=16;break}throw new Error("Invalid Payment Request certificate chain");case 16:if(o.verify()){t.next=18;break}throw new Error("Invalid Payment Request signature");case 18:return t.abrupt("return",o);case 19:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}(),p=function(){var t=Object(a.a)(Object(r.a)().mark((function t(n,a,o){var i,s,l,p,f,d;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new c.Payment(a),s=i.toRaw(),l={Accept:"application/".concat(o,"-paymentrequest, application/").concat(o,"-paymentack"),"Content-Type":"application/".concat(o,"-payment"),"Content-Transfer-Encoding":"binary"},t.next=5,u(n,l,s);case 5:return p=t.sent,f=e.from(p),d=c.PaymentACK.fromRaw(f),t.abrupt("return",d);case 9:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}).call(this,n(4).Buffer)},196:function(e,t,n){"use strict";n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b}));var r=n(0),a=n(98),o=n(60),c=n(111),i=n.n(c),s=n(13),u=function(e){a.a.success({message:"Success",description:r.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},r.createElement(i.a,null,"Transaction successful. Click to view in block explorer.")),duration:s.a.notificationDurationShort,icon:r.createElement(o.c,null),style:{width:"100%"}})},l=function(){a.a.success({message:"Success",description:r.createElement(i.a,null,"Tokens successfully minted! Please wait while balance is refreshed."),icon:r.createElement(o.l,null),style:{width:"100%"}})},p=function(e){a.a.success({message:"Success",description:r.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},r.createElement(i.a,null,"Transaction successful. Click to view in block explorer.")),duration:s.a.notificationDurationShort,icon:r.createElement(o.l,null),style:{width:"100%"}})},f=function(e,t,n,c){a.a.success({message:"Transaction received",description:r.createElement(i.a,null,"+"," ",parseFloat(Number(e.totalBalance-t.totalBalance).toFixed(s.a.cashDecimals)).toLocaleString()," ",s.a.ticker," ",n&&n.fiatCurrency&&"(".concat(s.a.fiatCurrencies[n.fiatCurrency].symbol).concat((Number(e.totalBalance-t.totalBalance)*c).toFixed(s.a.cashDecimals)," ").concat(n.fiatCurrency.toUpperCase(),")")),duration:s.a.notificationDurationShort,icon:r.createElement(o.c,null),style:{width:"100%"}})},d=function(e,t,n,c){a.a.success({message:"".concat(e.tokenTicker," transaction received: ").concat(t),description:r.createElement(i.a,null,"You received ",n.toString()," ",c),duration:e.notificationDurationShort,icon:r.createElement(o.l,null),style:{width:"100%"}})},h=function(e,t,n){console.log(e,t,n),a.a.error({message:"Error",description:t,duration:s.a.notificationDurationLong})},b=function(e){a.a.success({message:"Message Signature Generated",description:r.createElement(i.a,null,e),icon:r.createElement(o.e,null),style:{width:"100%"}})}},239:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(3),a=n(43),o=n(44),c=n(49),i=n(50),s=n(0),u=n.n(s),l=n(191),p=n(51),f=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.logPageChange(this.props.location.pathname,this.props.location.search)}},{key:"componentDidUpdate",value:function(e){var t=e.location,n=this.props.location,r=n.pathname,a=n.search,o=r!==t.pathname,c=a!==t.search;(o||c)&&this.logPageChange(r,a)}},{key:"logPageChange",value:function(e){var t=e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""),n=window.location;l.d(Object(r.a)({page:t,location:"".concat(n.origin).concat(t)},this.props.options)),l.c(t)}},{key:"render",value:function(){return null}}]),n}(s.Component),d=function(e,t,n){l.a({category:e,action:t,label:n})},h={GoogleAnalytics:f,RouteTracker:function(){return u.a.createElement(p.b,{component:f})},init:function(){return l.b("UA-183678810-1"),true}};t.b=h},309:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return k}));var r=n(19),a=n(7),o=n(17),c=n(29),i=n.n(c),s=n(13),u=n(42),l=n(195),p=n(112),f=n(57),d=n.n(f),h=n(59),b=n(14),m=n(189),g=n(22),v=n(153),x=n(414),w=b.script.SLP,y=b.script.common.opcodes;function k(){var t=1,n=66,c=18,f=64,k="".concat(s.a.postageUrl,"?currency=").concat(s.a.tokenPrefixes[0]),O=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t){var n,r,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(k);case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,!(o=r.stamps.find((function(e){return e.tokenId===t})))){e.next=10;break}return e.abrupt("return",{address:r.address,weight:r.weight,stamp:o});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(t,n,r){for(var a=["1","1"],o=0;o<n;o++)a.push("1");var c=W(e.alloc(32).toString("hex"),a),i=D({P2PKH:t},{P2PKH:a.length});i+=9+c.length,i+=546*(a.length-t);var s=Math.ceil(i/r.weight);return s<1&&(s=1),r.stamp.rate*s},j=function(){return"https://ecash.badger.cash:8332"},E=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat("https://ecash.badger.cash:8332","/tx/").concat(t,"?slp=true")).then((function(e){return e.json()})).catch((function(e){return null})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t){var n,o,c,i,s,l,p,f=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:30,o=!(f.length>2&&void 0!==f[2])||f[2],c=[],i=t.map((function(e){var t=Object(u.a)(e);return c.push({address:t}),fetch("".concat("https://ecash.badger.cash:8332","/tx/address/").concat(t,"?slp=true&limit=").concat(n,"&reverse=").concat(o)).then((function(e){return e.json()}))})),e.next=6,Promise.all(i);case 6:for(s=e.sent,l=[],p=0;p<s.length;p++)l=[].concat(Object(r.a)(l),Object(r.a)(s[p]));return e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e,t){var n=e.outputs.find((function(e){return e.slp})).slp.type,r=new i.a(0),a=new i.a(0),o=e.inputs.filter((function(e){return e.coin.slp&&t.includes(e.coin.address)&&"MINT"!=n})).reduce((function(e,t){return e.plus(t.coin.slp.value)}),new i.a(0)),c=e.outputs.filter((function(e){return e.slp&&t.includes(e.address)&&"BATON"!=e.slp.type})).reduce((function(e,t){return e.plus(t.slp.value)}),new i.a(0)),s=Math.pow(10,parseInt(e.slpToken.decimals));o.gte(c)?a=o.minus(c).div(s):r=c.minus(o).div(s);var u={};return u.qtySent=a.toString(),u.qtyReceived=r.toString(),u.tokenId=e.slpToken.tokenId,u.tokenName=e.slpToken.name,u.tokenTicker=e.slpToken.ticker,u.transactionType=n,u},A=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t,n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat("https://ecash.badger.cash:8332","/coin/").concat(t,"/").concat(n,"?slp=true")).then((function(e){return e.json()})).catch((function(e){return null})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t){var n,o,c,i,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],o=t.map((function(e){var t=Object(u.a)(e);return n.push({address:t}),fetch("".concat("https://ecash.badger.cash:8332","/coin/address/").concat(t,"?slp=true")).then((function(e){return e.json()}))})),e.next=4,Promise.all(o);case 4:for(c=e.sent,i=[],s=0;s<c.length;s++)i=[].concat(Object(r.a)(i),Object(r.a)(c[s]));return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t){var n,r,o,c,s,u,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.filter((function(e){return!e.slp||e.slp&&"0"==e.slp.value})),r=t.filter((function(e){return e.slp&&("0"!=e.slp.value||"MINT"==e.slp.type)})),o={},c=0;case 4:if(!(c<r.length)){e.next=23;break}if(s=r[c],!(u=o[s.slp.tokenId])){e.next=12;break}u.hasBaton="BATON"===s.slp.type,u.hasBaton||(u.balance=new i.a(u.balance).plus(new i.a(s.slp.value))),e.next=20;break;case 12:return u={},e.next=15,fetch("".concat("https://ecash.badger.cash:8332","/token/").concat(s.slp.tokenId)).then((function(e){return e.json()}));case 15:u.info=e.sent,u.tokenId=s.slp.tokenId,u.hasBaton="BATON"===s.slp.type,u.hasBaton?u.balance=new i.a(0):u.balance=new i.a(s.slp.value),o[s.slp.tokenId]=u;case 20:c++,e.next=4;break;case 23:return l=Object.values(o),e.abrupt("return",{tokens:l,nonSlpUtxos:n,slpUtxos:r});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://stats.bux.digital/api/mintsbypubkey/".concat(t)).then((function(e){return e.json()}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat("https://ecash.badger.cash:8332","/broadcast"),{method:"POST",body:JSON.stringify({tx:t})}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t){var n=0,r=!1,a={"MULTISIG-P2SH":196,"MULTISIG-P2WSH":170,"MULTISIG-P2SH-P2WSH":310,P2PKH:592,P2WPKH:272,"P2SH-P2WPKH":364},o={P2SH:128,P2PKH:136,P2WPKH:124,P2WSH:172};return Object.keys(e).forEach((function(t){if("MULTISIG"===t.slice(0,8)){var o=t.split(":");if(2!==o.length)throw new Error("invalid input: ".concat(t));var c=o[0],i=o[1].split("-").map((function(e){return parseInt(e)}));n+=a[c]*e[t];var s="MULTISIG-P2SH"===c?4:1;n+=(73*i[0]+34*i[1])*s}else n+=a[t]*e[t];t.indexOf("W")>=0&&(r=!0)})),Object.keys(t).forEach((function(e){n+=o[e]*t[e]})),r&&(n+=2),n+=40,Math.ceil(n/4)},U=function(t){for(var n=["ticker","name","documentUrl"],r=new b.Opcode(y.OP_PUSHDATA1,e.alloc(0)),a=(new b.Script).pushSym("return").pushData(e.concat([e.from("SLP","ascii"),e.alloc(1)])).pushPush(e.alloc(1,1)).pushData(e.from("GENESIS","ascii")),o=0;o<n.length;o++){var c=t[n[o]];c&&"string"===typeof c&&c.length>0?a.pushString(c):a.push(r)}if(t.documentHash){var i="string"===typeof t.documentHash?e.from(t.documentHash,"hex"):t.documentHash;if(!e.isBuffer(i)||0!=i.length&&32!=i.length)throw new Error("documentHash must be hex string or buffer of 32 bytes or less");0===i.length?a.push(r):a.pushPush(i)}else a.push(r);var s=parseInt(t.decimals);if(s>9||s<0)throw new Error("decimal value must be a number between 0 and 9");if(a.pushPush(e.alloc(1,s)),t.mintBatonVout){var u=parseInt(t.mintBatonVout);if(2!=u)throw new Error("mintBaton must equal 2");a.pushPush(e.alloc(1,u))}else a.push(r);return a.pushData(h.U64.fromString(t.initialQty).muln(Math.pow(10,s)).toBE(e)).compile(),a},N=function(t,n){return(new b.Script).pushSym("return").pushData(e.concat([e.from("SLP","ascii"),e.alloc(1)])).pushPush(e.alloc(1,1)).pushData(e.from("MINT","ascii")).pushData(t).pushPush(e.alloc(1,2)).pushData(n).compile()},W=function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=(new b.Script).pushSym("return").pushData(e.concat([e.from("SLP","ascii"),e.alloc(1)])).pushPush(e.alloc(1,r)).pushData(e.from("SEND","ascii")).pushData(e.from(t,"hex")),o=0;o<n.length;o++){var c=n[o];a.pushData(h.U64.fromString(c).toBE(e))}return a.compile()},H=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(new b.Script).pushSym("return").pushData(e.concat([e.from("SLP","ascii"),e.alloc(1)])).pushPush(e.alloc(1,r)).pushData(e.from("BURN","ascii")).pushData(e.from(t,"hex")).pushData(h.U64.fromString(n).toBE(e)).compile()},L=function(){var e=Object(o.a)(Object(a.a)().mark((function e(r,o,i){var l,p,d,h,m,g,v,x,w,y,k,O=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=O.length>3&&void 0!==O[3]&&O[3],e.prev=1,Object(u.f)(r)){e.next=5;break}throw new Error("Invalid wallet");case 5:return p=r.state.slpBalancesAndUtxos.nonSlpUtxos,d=r.Path1899.cashAddress,h=p.map((function(e){return b.Coin.fromJSON(e)})),m=new b.MTX,g=U(i),m.addOutput(g,0),m.addOutput(d,s.a.etokenSats),i.mintBatonVout&&m.addOutput(d,s.a.etokenSats),e.next=15,m.fund(h,{changeAddress:d,rate:1e3*o});case 15:if(v=[b.KeyRing.fromSecret(r.Path245.fundingWif),b.KeyRing.fromSecret(r.Path145.fundingWif),b.KeyRing.fromSecret(r.Path1899.fundingWif)],m.sign(v),x=m.toRaw().toString("hex"),w={success:!0},l){e.next=23;break}return e.next=22,B(x);case 22:w=e.sent;case 23:return y=m.txid().toString("hex"),w.success&&console.log("".concat(s.a.ticker," txid"),y),k="".concat(s.a.tokenExplorerUrl,"/tx/").concat(y),e.abrupt("return",k);case 29:throw e.prev=29,e.t0=e.catch(1),"insufficient priority (code 66)"===e.t0.error?e.t0.code=n:"txn-mempool-conflict (code 18)"===e.t0.error?e.t0.code=c:"Network Error"===e.t0.error?e.t0.code=t:"too-long-mempool-chain, too many unconfirmed ancestors [limit: 25] (code 64)"===e.t0.error&&(e.t0.code=f),console.log("error: ",e.t0),e.t0;case 34:case"end":return e.stop()}}),e,null,[[1,29]])})));return function(t,n,r){return e.apply(this,arguments)}}(),z=function(){var t=Object(o.a)(Object(a.a)().mark((function t(n,o,c){var u,p,f,h,m,g,v,x,w,y,O,j,E,I,P,A,R,T,C,D,U,N,H,L,z,K,M,F,_,q,V,G,X,J,Y,$,Q,Z,ee=arguments;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.tokenId,p=o.amount,f=o.tokenReceiverAddress,h=o.postageData,m=ee.length>3&&void 0!==ee[3]&&ee[3],g=n.Path1899.cashAddress,0!==(v=n.state.slpBalancesAndUtxos).nonSlpUtxos.length||h){t.next=6;break}throw new Error("You need some ".concat(s.a.ticker," to send ").concat(s.a.tokenTicker));case 6:if(x=v.nonSlpUtxos.map((function(e){return b.Coin.fromJSON(e)})),0!==(w=v.slpUtxos.filter((function(e){return!(!e||e.slp.tokenId!==u||"BATON"===e.slp.type)}))).length){t.next=10;break}throw new Error("No token UTXOs for the specified token could be found.");case 10:y=v.tokens.find((function(e){return e.tokenId==u})).info,console.log("tokenInfo",y),O=new b.MTX,j=new i.a(0),E=new i.a(0),I=new i.a(p).times(Math.pow(10,y.decimals)),P=I,A=[],R=0;case 19:if(!(R<w.length)){t.next=30;break}if(T=b.Coin.fromJSON(w[R]),A.push(T),j=j.plus(new i.a(w[R].slp.value)),h&&(C=S(A.length,1,h),E=new i.a(C)),!(P=I.plus(E)).lte(j)){t.next=27;break}return t.abrupt("break",30);case 27:R++,t.next=19;break;case 30:if(D=[I.toString()],E.gt(0)&&D.push(E.toString()),(U=j.minus(P)).gt(0)&&D.push(U.toString()),N=W(u,D,y.version),O.addOutput(N,0),H=d.a.decode(f),L=d.a.encode("ecash",H.type,H.hash),O.addOutput(L,s.a.etokenSats),E.gt(0)&&(z=d.a.decode(h.address),K=d.a.encode("ecash",z.type,z.hash),O.addOutput(K,s.a.etokenSats)),U.gt(0)&&O.addOutput(g,s.a.etokenSats),!h){t.next=45;break}for(M=0;M<A.length;M++)O.addCoin(A[M]);t.next=47;break;case 45:return t.next=47,O.fund([].concat(A,Object(r.a)(x)),{inputs:A.map((function(e){return b.Input.fromCoin(e).prevout})),changeAddress:g,rate:1e3*c});case 47:if(F=[b.KeyRing.fromSecret(n.Path245.fundingWif),b.KeyRing.fromSecret(n.Path145.fundingWif),b.KeyRing.fromSecret(n.Path1899.fundingWif)],_=b.Script.hashType,q=h?_.ALL|_.ANYONECANPAY|_.SIGHASH_FORKID:_.ALL|_.SIGHASH_FORKID,O.sign(F,q),G=O.toRaw(),X=G.toString("hex"),console.log("hex",X),J={merchantData:e.alloc(0),transactions:[G],refundTo:[{script:b.Script.fromAddress(g).toRaw(),value:0}],memo:""},!h){t.next=63;break}if(m){t.next=60;break}return t.next=59,Object(l.c)(k,J,s.a.tokenPrefixes[0]);case 59:Y=t.sent;case 60:Y.payment&&($=Y.payment.transactions.map((function(e){return b.TX.fromRaw(e).txid()})),V=$[0],console.log("".concat(s.a.tokenTicker," txid"),V)),t.next=70;break;case 63:if(Q={success:!0},m){t.next=68;break}return t.next=67,B(X);case 67:Q=t.sent;case 68:V=O.txid().toString("hex"),Q.success&&console.log("".concat(s.a.tokenTicker," txid"),V);case 70:return Z="".concat(s.a.tokenExplorerUrl,"/tx/").concat(V),t.abrupt("return",Z);case 72:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),K=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t,n){var r,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=b.KeyRing.fromSecret(t),o=b.utils.message.sign(n,r),e.abrupt("return",o.toString("base64"));case 6:throw e.prev=6,e.t0=e.catch(0),console.log("useBCH.signPkMessage() error: ",e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var r=Object(o.a)(Object(a.a)().mark((function r(o,l,p,d,h,m,g){var v,x,w,y,k,O,S,j,E,I,P,A,R,T,C,D,U,N,W,H,L=arguments;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(v=L.length>7&&void 0!==L[7]&&L[7],r.prev=1,x=new i.a(0),w=new b.MTX,!d){r.next=13;break}if(h&&h.length){r.next=7;break}throw new Error("Invalid destinationAddressAndValueArray");case 7:for(y=h.length,k=0;k<y;k++)x=i.a.sum(x,new i.a(h[k].split(",")[1]));if(!x.lt(new i.a(Object(u.c)(s.a.dustSats).toString()))){r.next=11;break}throw new Error("dust");case 11:r.next=18;break;case 13:if(g){r.next=15;break}return r.abrupt("return",null);case 15:if(!(x=new i.a(g)).lt(new i.a(Object(u.c)(s.a.dustSats).toString()))){r.next=18;break}throw new Error("dust");case 18:if(Object(u.h)(x)){r.next=22;break}throw new Error("Invalid decimal places for send amount");case 22:for("undefined"!==typeof p&&""!==p.trim()&&(O=(new b.Script).pushSym("return").pushData(e.from(s.a.opReturn.appPrefixesHex.cashtab,"hex")).pushString(p).compile(),w.addOutput(O,0)),S=o.state.slpBalancesAndUtxos.nonSlpUtxos,j=[],E=0;E<S.length;E++)I=S[E],j.push(b.Coin.fromJSON(I));if(P=o.Path1899.cashAddress,d)for(A=h.length,R=0;R<A;R++)T=h[R].split(",")[0],C=new i.a(h[R].split(",")[1]),w.addOutput(T,parseInt(Object(u.h)(C)));else w.addOutput(m,parseInt(Object(u.h)(x)));return r.next=30,w.fund(j,{changeAddress:P,rate:1e3*l});case 30:if(D=[b.KeyRing.fromSecret(o.Path245.fundingWif),b.KeyRing.fromSecret(o.Path145.fundingWif),b.KeyRing.fromSecret(o.Path1899.fundingWif)],w.sign(D),U=w.toRaw().toString("hex"),N={success:!0},v){r.next=38;break}return r.next=37,B(U);case 37:N=r.sent;case 38:return W=w.txid().toString("hex"),N.success&&console.log("".concat(s.a.ticker," txid"),W),H="".concat(s.a.blockExplorerUrl,"/tx/").concat(W),r.abrupt("return",H);case 44:throw r.prev=44,r.t0=r.catch(1),"insufficient priority (code 66)"===r.t0.error?r.t0.code=n:"txn-mempool-conflict (code 18)"===r.t0.error?r.t0.code=c:"Network Error"===r.t0.error?r.t0.code=t:"too-long-mempool-chain, too many unconfirmed ancestors [limit: 25] (code 64)"===r.t0.error&&(r.t0.code=f),console.log("error: ",r.t0),r.t0;case 49:case"end":return r.stop()}}),r,null,[[1,44]])})));return function(e,t,n,a,o,c,i){return r.apply(this,arguments)}}(),F=function(){var t=Object(o.a)(Object(a.a)().mark((function t(n,o,c){var i,u,p,f,d,m,g,y,k,O,S,j,E,I,P,A,R,T,C,B,D,U,N,H,L,z,K,M,_,q,V,G,X,J,Y,$,Q,Z,ee,te,ne,re,ae,oe,ce,ie,se,ue,le,pe,fe,de,he,be,me,ge,ve,xe,we,ye,ke,Oe,Se,je,Ee,Ie,Pe,Ae,Re=arguments;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Re.length>3&&void 0!==Re[3]&&Re[3],u=Re.length>4&&void 0!==Re[4]&&Re[4],p=Re.length>5&&void 0!==Re[5]?Re[5]:[],f=n.Path1899.cashAddress,d=new b.Output({address:f}),m=n.state.slpBalancesAndUtxos,g=m.nonSlpUtxos.map((function(e){return b.Coin.fromJSON(e)})),y=o.outputs[0],k=w.fromRaw(e.from(y.script)),O=k.isValidSlp(),!(p.length>=1)){t.next=25;break}E=b.TX.fromRaw(p[p.length-1]),I=E.outputs.map((function(e){return e.toJSON()})),P=o.outputs.map((function(e){return{script:e.script.toString("hex"),value:e.value}})),A=!1,R=0;case 16:if(!(R<P.length)){t.next=24;break}if(A=P[R].script===I[R].script&&P[R].value===I[R].value,0===R&&(A=P[R].script.replace("53454e44","4d494e54")===I[R].script&&P[R].value===I[R].value),A){t.next=21;break}return t.abrupt("break",24);case 21:R++,t.next=16;break;case 24:A&&(j=E.txid().toString("hex"),S={merchantData:e.alloc(0),transactions:p,refundTo:[{script:d.script.toRaw(),value:0}],memo:o.memo});case 25:if(S){t.next=112;break}if(T=!1,C=[],!O){t.next=94;break}if(D=k.getData(4),U=D.toString("hex"),"object"===typeof(N=o.getData("json"))&&N.postage&&(H=N.postage.stamps,(L=H.find((function(e){return e.tokenId==U})))&&0==L.rate&&(T=!0)),console.log("postagePaid",T),"SEND"===(z=k.getType())||"BURN"===z){t.next=37;break}throw new Error("Token ".concat(z," transactions not supported"));case 37:if(K=k.getRecords(D),M=null===(B=K[0])||void 0===B?void 0:B.version,_=K.reduce((function(t,n){return t.add(h.U64.fromBE(e.from(n.value)))}),h.U64.fromInt(0)),q=h.U64.fromInt(0),(V=n.state.tokens.find((function(e){return e.tokenId===U})))&&(q=h.U64.fromString(V.balance.toString())),!q.lt(_)||0!==p.length){t.next=45;break}throw new Error("Insufficient token balance to complete transaction");case 45:if(G=[],!(p.length>0)){t.next=57;break}X=b.TX.fromRaw(p[p.length-1]),J=b.script.SLP.fromRaw(X.outputs[0].script.toRaw()),Y=J.getRecords(e.alloc(32)),$=Object(a.a)().mark((function e(t){var n,r,o,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===(n=X.outputs[t].getAddress())||void 0===n?void 0:n.toString())===f&&(r=Y.find((function(e){return"BATON"!==e.type&&e.vout===t})))&&((o=b.Coin.fromTX(X,t,-1)).slp=r,c=o.toJSON(),G.push(c));case 2:case"end":return e.stop()}}),e)})),Q=0;case 52:if(!(Q<X.outputs.length)){t.next=57;break}return t.delegateYield($(Q),"t0",54);case 54:Q++,t.next=52;break;case 57:if("BURN"!==z||u){t.next=74;break}return G.length=0,Z=v.PaymentDetails.fromOptions(o),ee=_.toString(),te=W(U,[ee],M),ne={script:te.toRaw(),value:0},re=new b.Output({address:f,value:546}),Z.outputs=[ne,{script:re.script.toRaw(),value:re.value}],t.next=67,F(n,Z,c,!1,!0);case 67:if(ae=t.sent,(oe=ae.getData("json")).preburn){t.next=71;break}throw new Error("Burn failed: Preburn tx hash not returned from payment server");case 71:G.push({version:1,height:-1,coinbase:!1,script:re.script.toJSON(),value:re.value,hash:oe.preburn,index:1,slp:{vout:1,tokenId:U,value:ee,type:"SEND"}}),t.next=76;break;case 74:ce=m.slpUtxos.filter((function(e){return!(!e||e.slp.tokenId!==U||"BATON"===e.slp.type)})),G.push.apply(G,Object(r.a)(ce));case 76:if(0!==G.length){t.next=78;break}throw new Error("No token UTXOs for the specified token could be found.");case 78:ie=h.U64.fromInt(0),se=0;case 80:if(!(se<G.length)){t.next=92;break}if(console.log("tokenUtxos",G),ue=b.Coin.fromJSON(G[se]),C.push(ue),ie=ie.add(h.U64.fromString(G[se].slp.value)),!_.lte(ie)){t.next=89;break}return 0!=(le=ie.sub(_)).toInt()&&(k.pushData(le.toBE(e)).compile(),o.outputs[0].script=k.toRaw(),o.outputs.splice(K.length+1,0,{script:d.script.toRaw(),value:546})),t.abrupt("break",92);case 89:se++,t.next=80;break;case 92:if(T||0!==m.nonSlpUtxos.length){t.next=94;break}throw new Error("You need some ".concat(s.a.ticker," to send ").concat(s.a.tokenTicker));case 94:for(pe=new b.MTX,fe=b.Script.hashType.ALL|b.Script.hashType.SIGHASH_FORKID,de=0;de<o.outputs.length;de++)pe.addOutput(o.outputs[de]);if(!T){t.next=102;break}for(fe=b.Script.hashType.ANYONECANPAY|fe,he=0;he<C.length;he++)pe.addCoin(C[he]);t.next=104;break;case 102:return t.next=104,pe.fund([].concat(C,Object(r.a)(g)),{inputs:C.map((function(e){return b.Input.fromCoin(e).prevout})),changeAddress:f,rate:1e3*c});case 104:be=[b.KeyRing.fromSecret(n.Path245.fundingWif),b.KeyRing.fromSecret(n.Path145.fundingWif),b.KeyRing.fromSecret(n.Path1899.fundingWif)],pe.sign(be,fe),me=pe.toRaw(),ge=me.toString("hex"),console.log("hex",ge),ve=[].concat(Object(r.a)(p),[me]),S={merchantData:e.alloc(0),transactions:ve,refundTo:[{script:d.script.toRaw(),value:0}],memo:o.memo},j=pe.txid().toString("hex");case 112:if(i){t.next=116;break}return t.next=115,Object(l.c)(o.paymentUrl,S,O?s.a.tokenPrefixes[0]:s.a.prefixes[0]);case 115:xe=t.sent;case 116:if(!xe.payment){t.next=133;break}if(!u){t.next=119;break}return t.abrupt("return",xe.payment);case 119:if(we=xe.payment.transactions.map((function(e){return b.TX.fromRaw(e).txid()})),j=we[0],console.log("".concat(s.a.tokenTicker," txid"),j),!O){t.next=133;break}if(ye=b.TX.fromRaw(xe.payment.transactions[0]),ke=b.script.SLP.fromRaw(ye.outputs[0].script.toRaw()),Oe="MINT"===ke.getType(),Se="02"==ke.getString(2,"hex"),!Oe||!Se){t.next=133;break}for(je=ke.code.slice(5),Ee=h.U64.fromNumber(0),Ie=0;Ie<je.length;Ie++)Pe=h.U64.fromBE(je[Ie].toData()),Ee.iadd(Pe);return t.next=133,Object(x.c)({txid:j,token_id:ke.getData(4).toString("hex"),block:-1,minter_pubkey:n.Path1899.publicKey,mint_total_amount:Ee.toInt()});case 133:return Ae="".concat(s.a.tokenExplorerUrl,"/tx/").concat(j),t.abrupt("return",Ae);case 135:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),_=function(t){var n=e.from(t,"base64");if(n.length>300)return q(t);var r=Object(g.read)(n),a=r.readBytes(8),o=r.readBytes(36);return{version:1,mintQuantity:a,stampOutpoint:b.Outpoint.fromRaw(o),txAuthSig:r.readBytes(r.getSize()-r.offset)}},q=function(t){for(var n=e.from(t,"base64"),r=Object(g.read)(n),a=r.readBytes(33),o=r.readBytes(231),c=r.readVarBytes(),i=r.readBytes(6),s=r.readBytes(20),u=r.readBytes(36),l=b.Outpoint.fromRaw(u),p=r.readBytes(r.getSize()-r.offset),f=Object(g.read)(p),d=[];f.getSize()>f.offset;)d.push(b.Output.fromReader(f));for(var m=d[0].script.getData(4),v=h.U64.fromNumber(0),x=d[0].script.code.slice(5),w=0;w<x.length;w++){var y=h.U64.fromBE(x[w].toData());v.iadd(y)}return{version:2,tokenId:m,mintQuantity:v.toBE(e),authCodeBuf:n,authPubKey:a,serializedMerkleProof:o,mintId:i,minterPubKeyHash:s,batonUtxo:l,txSerializedOutputs:p,txOutputs:d,txAuthSig:c}},V=function(){var r=Object(o.a)(Object(a.a)().mark((function r(o,i,u){var l,d,h,g,v,x,w,y,k,O,S,j,E,I,P,T,C,D,U,W,H,L,z,K,M,F,q,V,G,X,J,Y,$,Q,Z,ee,te,ne,re,ae,oe,ce,ie=arguments;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=ie.length>3&&void 0!==ie[3]&&ie[3],d=ie.length>4&&void 0!==ie[4]&&ie[4],r.prev=2,h=i.toString("hex"),g=_(u),v=g.mintQuantity,x=g.stampOutpoint,w=g.txAuthSig,y=p.b.find((function(e){return e.tokenId==h})),k=y.pubkey){r.next=8;break}throw new Error("Unsupported self-mint token ID: ".concat(h));case 8:return O=Object(p.c)(e.from(k,"hex"),!1),S=m.Hash160.digest(O.toRaw()),j=b.Script.fromScripthash(S),E=j.getAddress(),r.next=14,R([E.toCashAddr()]);case 14:return I=r.sent,P=I.find((function(e){var t;return(null===(t=e.slp)||void 0===t?void 0:t.tokenId)==h&&"BATON"==e.slp.type})),T=b.Coin.fromJSON(P),C=Object(p.c)(e.from(k,"hex"),!0),D=m.Hash160.digest(C.toRaw()),b.Script.fromScripthash(D),r.next=22,A(x.txid().toString("hex"),x.index);case 22:if(U=r.sent){r.next=25;break}throw new Error("Stamp UTXO in auth code is spent or invalid");case 25:for(W=b.Coin.fromJSON(U),H=b.KeyRing.fromSecret(o.Path1899.fundingWif),L=new p.a,z=N(i,v),L.addOutput(z,0),L.addOutput(H.getAddress(),546),L.addOutput(E,546),L.addCoin(W),L.addCoin(T),K=b.Script.hashType.ALL|b.Script.hashType.SIGHASH_FORKID,M=b.Script.flags.STANDARD_VERIFY_FLAGS,L.template(H),F=L.outputs.map((function(e){return e.toRaw()})),q=e.concat(F),V=L.inputs.map((function(e){return e.prevout.toRaw()})),G=e.concat(V),X=0;X<2;X++)J=L.inputs[X].prevout,Y=L.view.getOutput(J),$=0==X?C:O,Q=L.signature(X,$,Y.value,H.privateKey,K,M),Z=L.getPreimage(X,$,Y.value,K,!1),ee=[Q,H.getPublicKey(),e.from(Z.toString("hex"),"hex"),w,q,G,$.toRaw()],L.inputs[X].script.fromItems(ee);if(te=L.toRaw(),ne=te.toString("hex"),re=L.verify(L.view),console.log("verified",re),console.log("tx size",L.getSize()),console.log("fee",L.getFee()),console.log("tx hex",ne),re){r.next=51;break}throw new Error("Transaction verification failed");case 51:if(!d){r.next=53;break}return r.abrupt("return",te);case 53:if(ae={success:!0},l){r.next=60;break}return r.next=57,B(ne);case 57:if(!(ae=r.sent).error){r.next=60;break}throw ae.error;case 60:return oe=L.txid().toString("hex"),ae.success&&console.log("".concat(s.a.tokenTicker," txid"),oe),ce="".concat(s.a.tokenExplorerUrl,"/tx/").concat(oe),r.abrupt("return",ce);case 66:throw r.prev=66,r.t0=r.catch(2),"insufficient priority (code 66)"===r.t0.error?r.t0.code=n:"txn-mempool-conflict (code 18)"===r.t0.error?r.t0.code=c:"Network Error"===r.t0.error?r.t0.code=t:"too-long-mempool-chain, too many unconfirmed ancestors [limit: 25] (code 64)"===r.t0.error&&(r.t0.code=f),console.log("error: ",r.t0),r.t0;case 71:case"end":return r.stop()}}),r,null,[[2,66]])})));return function(e,t,n){return r.apply(this,arguments)}}(),G="01217f78aa7c517f01207f6b7c81637c687eaa6c517f01207f6b7c81637c687eaa6c517f01207f6b7c81637c687eaa6c517f01207f6b7c81637c687eaa6c517f01207f6b7c81637c687eaa6c517f01207f6b7c81637c687eaa6c517f7c81637c687eaa2062443f1f0f45468a0e69c6eb1f3f4aabdcc541ac64eae813365d47dbf6dab176887c517f7c817f766b7bbb6c011a7f7c567f5479a9887501247faa5279820128947f01207f757b8801447f7701247f7588a86f7b828c7f757c7bbb75ac",X=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?G.replace("62443f1f0f45468a0e69c6eb1f3f4aabdcc541ac64eae813365d47dbf6dab176","2378b2a25b26ab248cd09a11b41f54452c4c8860fd1f7a835d13e784b1ac80be"):G},J=function(){var r=Object(o.a)(Object(a.a)().mark((function r(o,i){var u,l,d,h,m,g,v,x,w,y,k,O,S,j,E,I,P,R,T,C,D,U,N,W,H,L=arguments;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u=L.length>2&&void 0!==L[2]&&L[2],l=L.length>3&&void 0!==L[3]&&L[3],d=L.length>4?L[4]:void 0,h=L.length>5&&void 0!==L[5]&&L[5],r.prev=4,m=_(i),g=m.batonUtxo,v=m.txOutputs,x=m.authCodeBuf,!d){r.next=11;break}y=p.a.fromRaw(d),w=b.Coin.fromTX(y,1,-1),r.next=15;break;case 11:return r.next=13,A(g.rhash(),g.index);case 13:k=r.sent,w=b.Coin.fromJSON(k);case 15:if(O=b.KeyRing.fromSecret(o.Path1899.fundingWif),(S=new p.a).outputs=v,S.addCoin(w),j=b.Script.fromRaw(e.from(X(h),"hex")),b.Address.fromScripthash(j.hash160()).toString()===w.getAddress().toString()){r.next=23;break}throw new Error("Unsupported token. Invalid ScriptHash for baton");case 23:if(E=b.Script.hashType.ALL|b.Script.hashType.SIGHASH_FORKID,I=b.Script.flags.STANDARD_VERIFY_FLAGS,S.template(O),P=S.signature(0,j,w.value,O.privateKey,E,I),R=S.getPreimage(0,j,w.value,E,!1),T=[P,O.getPublicKey(),e.from(R.toString("hex"),"hex"),x.slice(264),x.slice(0,264),j.toRaw()],S.inputs[0].script.fromItems(T),C=S.toRaw(),D=C.toString("hex"),U=S.verify(S.view),console.log("verified",U),console.log("tx size",S.getSize()),console.log("fee",S.getFee()),console.log("tx hex",D),U){r.next=39;break}throw new Error("Transaction verification failed");case 39:if(!l){r.next=41;break}return r.abrupt("return",C);case 41:if(N={success:!0},u){r.next=48;break}return r.next=45,B(D);case 45:if(!(N=r.sent).error){r.next=48;break}throw N.error;case 48:return W=S.txid().toString("hex"),N.success&&console.log("".concat(s.a.tokenTicker," txid"),W),H="".concat(s.a.tokenExplorerUrl,"/tx/").concat(W),r.abrupt("return",H);case 54:throw r.prev=54,r.t0=r.catch(4),"insufficient priority (code 66)"===r.t0.error?r.t0.code=n:"txn-mempool-conflict (code 18)"===r.t0.error?r.t0.code=c:"Network Error"===r.t0.error?r.t0.code=t:"too-long-mempool-chain, too many unconfirmed ancestors [limit: 25] (code 64)"===r.t0.error&&(r.t0.code=f),console.log("error: ",r.t0),r.t0;case 59:case"end":return r.stop()}}),r,null,[[4,54]])})));return function(e,t){return r.apply(this,arguments)}}(),Y=function(){var e=Object(o.a)(Object(a.a)().mark((function e(t,n){var o,c,i,u,f,d,h,m,g,v,x,w,y,O,S,j,E,I,P,A=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=A.length>3?A[3]:void 0,0!==(o=A.length>2&&void 0!==A[2]?A[2]:[]).length){e.next=10;break}if(i=t.state.slpBalancesAndUtxos,0!==(u=i.slpUtxos.filter((function(e){return!(!e||e.slp.tokenId!==n||"BATON"===e.slp.type)}))).length){e.next=7;break}throw new Error("No token UTXOs for the specified token could be found.");case 7:o.push.apply(o,Object(r.a)(u)),e.next=13;break;case 10:if(!o.some((function(e){return null===e||void 0===e||!e.slp||e.slp.tokenId!=n||"BATON"===e.slp.type}))){e.next=13;break}throw new Error("Invalid UTXOS provided for generateBurnTx.");case 13:for(f=0,d=o.map((function(e){return f+=parseInt(e.slp.value),b.Coin.fromJSON(e)})),h=d[0].slp.version,m=new p.a,g=H(n,"".concat(f),h),m.addOutput(g,0),c&&m.addOutput(c),v=0;v<d.length;v++)m.addCoin(d[v]);return e.next=23,m.estimateSize();case 23:if(x=e.sent,w=x>m.getFee(),y=[b.KeyRing.fromSecret(t.Path245.fundingWif),b.KeyRing.fromSecret(t.Path145.fundingWif),b.KeyRing.fromSecret(t.Path1899.fundingWif)],O=b.Script.hashType,S=w?O.ALL|O.ANYONECANPAY|O.SIGHASH_FORKID:O.ALL|O.SIGHASH_FORKID,m.sign(y,S),j=m.toRaw(),console.log("rawTx",j.toString("hex")),!w){e.next=44;break}if(2==h){e.next=34;break}throw new Error("Postage needed, but is only available for token type (version) 2.");case 34:return E=b.Script.fromPubkeyhash(y[2].getKeyHash()),I={merchantData:{returnRawTx:!0},transactions:[j],refundTo:[{script:E.toRaw(),value:0}],memo:""},e.next=38,Object(l.c)(k,I,s.a.tokenPrefixes[0]);case 38:if(!(P=e.sent).payment){e.next=43;break}return e.abrupt("return",P.payment.transactions[0]);case 43:throw new Error("Error retreiving postage paid transaction.");case 44:return e.abrupt("return",j);case 45:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{calcFee:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a.defaultFee,r=D({P2PKH:e.length},{P2PKH:t});return Math.ceil(n*r)},getPostage:O,calculatePostage:S,getUtxoBcash:A,getUtxosBcash:R,getSlpBalancesAndUtxosBcash:T,getTxBcash:E,getTxHistoryBcash:I,getMintHistory:C,parseTxData:function(t,n){for(var r=[t.Path245.cashAddress,t.Path145.cashAddress,t.Path1899.cashAddress],a=[],o=0;o<n.length;o+=1){var c=n[o],i={};i.txid=c.hash,i.height=c.height;var l=c.outputs.find((function(e){return e.address})),p=null===l||void 0===l?void 0:l.address;if(Object.keys(c).includes("inputs")){i.confirmations=c.confirmations,i.blocktime=c.time;for(var f=0,d=0,h="",b=!1,m=!1,g=!1,v="",x=c.inputs[0].coin.address,w=0;w<c.inputs.length;w+=1){var y=c.inputs[w];r.includes(y.coin.address)&&(m=!0)}for(var k=0;k<c.outputs.length;k+=1){var O=c.outputs[k];if(O.address)if(O.address&&r.includes(O.address)){if(m)continue;d+=Object(u.c)(O.value)}else m&&(f+=Object(u.c)(O.value));else{var S=O.script;if(c.slpToken)g=!0,i.tokenInfo=P(c,r);else if(Object(s.d)(S))try{v=Object(s.b)(S),h=e.from(v,"hex"),b=!0}catch(j){h="",console.log("useBCH.parsedTxHistory() error: invalid cashtab msg hex: "+v)}else try{v=Object(s.c)(S),h=e.from(v,"hex")}catch(j){h="",console.log("useBCH.parsedTxHistory() error: invalid external msg hex: "+v)}}}i.amountSent=f,i.amountReceived=d,i.tokenTx=g,i.outgoingTx=m,i.replyAddress=x,i.destinationAddress=p,i.opReturnMessage=h,i.isCashtabMessage=b,a.push(i)}else a.push(i)}return a},parseTokenInfoForTxHistory:P,getBcashRestUrl:j,signPkMessage:K,sendXec:M,sendToken:z,sendBip70:F,readAuthCode:_,readAuthCodeV2:q,sendSelfMint:V,sendSelfMintV2:J,getMintVaultAddress:function(){var t=X(arguments.length>0&&void 0!==arguments[0]&&arguments[0]);console.log("outscriptHex",t);var n=m.Hash160.digest(e.from(t,"hex"));return b.Script.fromScripthash(n).getAddress()},generateBurnTx:Y,createToken:L}}}).call(this,n(4).Buffer)},310:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return f}));var r=n(29),a=n.n(r),o=n(13),c=n(42),i=function(e,t,n,r){var i=!1,u=new a.a(e);return t!==o.a.ticker&&(u=new a.a(s(e,n))),isNaN(u)?i="Amount must be a number":u.lte(0)?i="Amount must be greater than 0":u.lt(Object(c.c)(o.a.dustSats).toString())?i="Send amount must be at least ".concat(Object(c.c)(o.a.dustSats).toString()," ").concat(o.a.ticker):u.gt(r)?i="Amount cannot exceed your ".concat(o.a.ticker," balance"):!isNaN(u)&&u.toString().includes(".")&&u.toString().split(".")[1].length>o.a.cashDecimals&&(i="".concat(o.a.ticker," transactions do not support more than ").concat(o.a.cashDecimals," decimal places")),i},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.cashDecimals;return new a.a(e).div(new a.a(t)).toFixed(n)},u=function(e){try{return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"fiatCurrency")&&o.a.settingsValidation.fiatCurrency.includes(e.fiatCurrency)}catch(t){return!1}},l=function(e,t){try{return void 0===e?"N/A":void 0===t?new Number(e).toLocaleString({maximumFractionDigits:o.a.cashDecimals}):new Number(e).toLocaleString(t,{maximumFractionDigits:o.a.cashDecimals})}catch(n){return"N/A"}},p=function(e,t){try{return 0===e?Number(e).toFixed(o.a.cashDecimals):void 0===t?e.toLocaleString({maximumFractionDigits:o.a.cashDecimals}):e.toLocaleString(t,{maximumFractionDigits:o.a.cashDecimals})}catch(n){return e}},f=function(e,t,n){var r=!0;try{if(null===e||void 0===e)return"invalid address input";if(null===t||void 0===t)return"invalid value input";if(null===n||void 0===n)return"invalid ticker input";var a=e.address,c=e.isValid;e.queryString,e.amount;return c?t<5.5&&(r="Send amount must be at least 5.5 XEC"):(r="Invalid ".concat(n," address"),Object(o.f)(a)&&(r="Token addresses are not supported for ".concat(n," sends"))),r}catch(i){return i}}},414:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(7),a=n(17),o=n(35),c=n.n(o),i=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="externalMints-".concat(t.minter_pubkey),e.next=4,c.a.getItem(n);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:return(a=e.t0).push(t),e.next=11,c.a.setItem(n,a);case 11:console.log("added item to storage",n,a),e.next=18;break;case 14:e.prev=14,e.t1=e.catch(0),console.log("Error in writeMempoolMint()"),console.log(e.t1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="externalMints-".concat(t),e.next=4,c.a.getItem(n);case 4:return a=e.sent,e.abrupt("return",a||[]);case 8:e.prev=8,e.t0=e.catch(0),console.log("Error in getMempoolMints()"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t,n){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a="externalMints-".concat(t),0!==n.length){e.next=8;break}return e.next=5,c.a.removeItem(a);case 5:console.log("removed item with key",a),e.next=11;break;case 8:return e.next=10,c.a.setItem(a,n);case 10:console.log("updated item with key",a,n);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("Error in updateMempoolMints()"),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}()},42:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return m}));var r=n(13),a=n(29),o=n.n(a),c=n(57),i=n.n(c),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a.cashDecimals,n=new o.a(e),a=new o.a(Math.pow(10,-1*t));return n.times(a).toNumber()},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a.cashDecimals;if(!(o.a.isBigNumber(e)&&e.dp()<=t))return!1;var n=new o.a(Math.pow(10,t));return e.times(n)},l=function(e,t){try{return void 0===t?new Number(e).toLocaleString({maximumFractionDigits:r.a.cashDecimals}):new Number(e).toLocaleString(t,{maximumFractionDigits:r.a.cashDecimals})}catch(n){return console.log("Error in formatBalance for ".concat(e)),console.log(n),e}},p=function(e){for(var t=e,n=t.slpBalancesAndUtxos,r=t.tokens,a=0;a<r.length;a+=1){var c=r[a].balance;"object"!==typeof c||Array.isArray(c)||null===c||(c._isBigNumber=!0),r[a].balance=new o.a(c)}var i=f(n);return t.balances=i,t},f=function(e){var t=e.nonSlpUtxos.reduce((function(e,t){return e+t.value}),0);return{totalBalanceInSatoshis:t,totalBalance:s(t)}},d=function(e){return"object"===typeof e&&"state"in e&&"object"===typeof e.state&&"balances"in e.state&&"utxos"in e.state&&"slpBalancesAndUtxos"in e.state&&"tokens"in e.state},h=function(e){return e&&e.state?e.state:{balances:{totalBalance:0,totalBalanceInSatoshis:0},hydratedUtxoDetails:{},tokens:[],slpBalancesAndUtxos:{},parsedTxHistory:[],utxos:[]}};function b(e){if(e.includes(":")){var t,n=i.a.decode(e),r=n.type,a=n.hash,o=n.prefix;if("bitcoincash"===o)t="ecash";else{if("simpleledger"!==o)return e;t="etoken"}return i.a.encode(t,r,a)}return e}var m=function(e){return!(e.Path1899&&e.Path1899.publicKey&&e.Path145.publicKey&&e.Path245.publicKey&&"bitcoincash"!==e.Path1899.cashAddress.split(":")[0])}},458:function(e,t,n){e.exports=n(794)},60:function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return O})),n.d(t,"l",(function(){return S})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return I})),n.d(t,"k",(function(){return P})),n.d(t,"i",(function(){return A})),n.d(t,"j",(function(){return R})),n.d(t,"h",(function(){return T})),n.d(t,"d",(function(){return C})),n.d(t,"a",(function(){return B}));var r,a,o,c,i,s,u,l=n(37),p=n(0),f=n(36),d=n(127),h=n(795),b=n(796),m=n(797),g=n(798),v=n(799),x=n(800),w=n(307),y=n(13),k=p.createElement(d.a,{className:"cashLoadingIcon"}),O=function(){return p.createElement(w.a,{height:"33px",width:"30px",src:y.a.logo,preview:!1})},S=function(){return p.createElement(w.a,{src:y.a.tokenLogo,height:"33px",width:"30px",preview:!1})},j=function(){return p.createElement(w.a,{src:y.a.tokenLogo,height:"33px",width:"30px",preview:!1})},E=Object(f.d)(h.a)(r||(r=Object(l.a)(["\n    color: "," !important;\n"])),(function(e){return e.theme.icons.outlined})),I=Object(f.d)(b.a)(a||(a=Object(l.a)(["\n    color: "," !important;\n"])),(function(e){return e.theme.icons.outlined})),P=Object(f.d)(m.a)(o||(o=Object(l.a)(["\n    color: "," !important;\n"])),(function(e){return e.theme.icons.outlined})),A=Object(f.d)(g.a)(c||(c=Object(l.a)(["\n    color: "," !important;\n"])),(function(e){return e.theme.icons.outlined})),R=Object(f.d)(v.a)(i||(i=Object(l.a)(["\n    color: "," !important;\n"])),(function(e){return e.theme.icons.outlined})),T=Object(f.d)(x.a)(s||(s=Object(l.a)(["\n    color: "," !important;\n"])),(function(e){return e.theme.icons.outlined})),C=f.d.div(u||(u=Object(l.a)(["\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 24px;\n    flex-direction: column;\n    svg {\n        width: 50px;\n        height: 50px;\n        fill: ",";\n    }\n"])),(function(e){return e.theme.primary})),B=function(){return p.createElement(C,null,p.createElement(d.a,null))}},794:function(e,t,n){"use strict";n.r(t);var r,a,o,c=n(0),i=n.n(c),s=n(64),u=n.n(s),l=n(8),p=n(31),f=n(37),d=(n(463),n(801)),h=n(60),b=n(36),m={primary:"#00ABE7",brandSecondary:"#CD0BC3",contrast:"#fff",app:{sidebars:'url("/cashtab_bg.png")',background:"#fbfbfd"},wallet:{background:"#fff",text:{primary:"#273498",secondary:"#273498"},switch:{activeCash:{shadow:"inset 8px 8px 16px #0074C2, inset -8px -8px 16px #273498"},activeToken:{background:"#CD0BC3",shadow:"inset 5px 5px 11px #FF21D0, inset -5px -5px 11px #CD0BC3"},inactive:{background:"linear-gradient(145deg, #eeeeee, #c8c8c8)"}},borders:{color:"#e2e2e2"},shadow:"rgba(0, 0, 0, 1)"},tokenListItem:{background:"#ffffff",color:"",boxShadow:"rgb(136 172 243 / 25%) 0px 10px 30px,rgb(0 0 0 / 3%) 0px 1px 1px, rgb(0 51 167 / 10%) 0px 10px 20px",border:"#e9eaed",hoverBorder:"#231F20"},footer:{background:"#fff",navIconInactive:"#949494"},forms:{error:"#FF21D0",border:"#e7edf3",text:"#000",addonBackground:"#f4f4f4",addonForeground:"#3e3f42",selectionBackground:"#fff"},icons:{outlined:"#273498"},modals:{buttons:{background:"#fff"}},settings:{delete:"#CD0BC3"},qr:{copyBorderCash:"#00ABE7",copyBorderToken:"#FF21D0",background:"#fff",token:"#231F20",shadow:"rgb(136 172 243 / 25%) 0px 10px 30px, rgb(0 0 0 / 3%) 0px 1px 1px, rgb(0 51 167 / 10%) 0px 10px 20px"},buttons:{primary:{backgroundImage:"linear-gradient(270deg, #0074C2 0%, #273498 100%)",color:"#fff",hoverShadow:"0px 3px 10px -5px rgba(0, 0, 0, 0.75)",disabledOverlay:"rgba(255, 255, 255, 0.5)"},secondary:{background:"#e9eaed",color:"#444",hoverShadow:"0px 3px 10px -5px rgba(0, 0, 0, 0.75)",disabledOverlay:"rgba(255, 255, 255, 0.5)"}},collapses:{background:"#fbfcfd",border:"#eaedf3",color:"#3e3f42"},generalSettings:{item:{icon:"#949494",title:"#949494"},background:"#fff"}},g=n(803),v=n(804),x=n(805),w=n(806),y=n.p+"static/media/cashtab_xec.eb6d1077.png",k=n(90),O=n(42),S=b.d.h4(r||(r=Object(f.a)(["\n    font-size: 20px;\n    font-weight: bold;\n    display: inline-block;\n    color: #8a8a8a;\n    margin-bottom: 0px;\n    @media (max-width: 400px) {\n        font-size: 16px;\n    }\n"]))),j=function(e){var t=e.name;return c.createElement(c.Fragment,null,t&&"string"===typeof t&&c.createElement(S,null,t))},E=n(51),I=n.p+"static/media/tabcash.eeaaa8fd.png",P=n.p+"static/media/logo_topright.fa22e205.png",A=n(132),R=n(7),T=n(17),C=n(802),B=n(155),D=b.d.div(a||(a=Object(f.a)(["\n    h2 {\n        color: ",";\n        font-size: 25px;\n    }\n    p {\n        color: ",";\n    }\n"])),(function(e){return e.theme.wallet.text.primary}),(function(e){return e.theme.wallet.text.secondary})),U=function(){var e,t=Object(c.useContext)(k.a),n=function(){var e=Object(T.a)(Object(R.a)().mark((function e(){return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.signUp();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),C.a.error({title:"Registration Error",content:"Cannot create Credential on your device",centered:!0});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return e=t?i.a.createElement("div",null,i.a.createElement("p",null,"Enable wallet lock to protect your funds."),i.a.createElement("p",null,"You will need to unlock with your"," ",i.a.createElement("strong",null,"fingerprint / device pin")," in order to access the wallet."),i.a.createElement("p",null,"This lock can also be enabled / disabled under",i.a.createElement("br",null),i.a.createElement("strong",null,"Settings / General Settings / App Lock")),i.a.createElement(B.c,{onClick:n},"Enable Lock"),i.a.createElement(B.a,{onClick:function(){return t.turnOffAuthentication()}},"Skip")):i.a.createElement("p",null,"Authentication is not supported"),i.a.createElement(D,null,i.a.createElement("h2",null,i.a.createElement(h.h,null)," Wallet Lock"),e)},N=["title","titleId"];function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function L(e,t){var n=e.title,r=e.titleId,a=H(e,N);return c.createElement("svg",W({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"fingerprint",className:"svg-inline--fa fa-fingerprint fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,o||(o=c.createElement("path",{fill:"currentColor",d:"M256.12 245.96c-13.25 0-24 10.74-24 24 1.14 72.25-8.14 141.9-27.7 211.55-2.73 9.72 2.15 30.49 23.12 30.49 10.48 0 20.11-6.92 23.09-17.52 13.53-47.91 31.04-125.41 29.48-224.52.01-13.25-10.73-24-23.99-24zm-.86-81.73C194 164.16 151.25 211.3 152.1 265.32c.75 47.94-3.75 95.91-13.37 142.55-2.69 12.98 5.67 25.69 18.64 28.36 13.05 2.67 25.67-5.66 28.36-18.64 10.34-50.09 15.17-101.58 14.37-153.02-.41-25.95 19.92-52.49 54.45-52.34 31.31.47 57.15 25.34 57.62 55.47.77 48.05-2.81 96.33-10.61 143.55-2.17 13.06 6.69 25.42 19.76 27.58 19.97 3.33 26.81-15.1 27.58-19.77 8.28-50.03 12.06-101.21 11.27-152.11-.88-55.8-47.94-101.88-104.91-102.72zm-110.69-19.78c-10.3-8.34-25.37-6.8-33.76 3.48-25.62 31.5-39.39 71.28-38.75 112 .59 37.58-2.47 75.27-9.11 112.05-2.34 13.05 6.31 25.53 19.36 27.89 20.11 3.5 27.07-14.81 27.89-19.36 7.19-39.84 10.5-80.66 9.86-121.33-.47-29.88 9.2-57.88 28-80.97 8.35-10.28 6.79-25.39-3.49-33.76zm109.47-62.33c-15.41-.41-30.87 1.44-45.78 4.97-12.89 3.06-20.87 15.98-17.83 28.89 3.06 12.89 16 20.83 28.89 17.83 11.05-2.61 22.47-3.77 34-3.69 75.43 1.13 137.73 61.5 138.88 134.58.59 37.88-1.28 76.11-5.58 113.63-1.5 13.17 7.95 25.08 21.11 26.58 16.72 1.95 25.51-11.88 26.58-21.11a929.06 929.06 0 0 0 5.89-119.85c-1.56-98.75-85.07-180.33-186.16-181.83zm252.07 121.45c-2.86-12.92-15.51-21.2-28.61-18.27-12.94 2.86-21.12 15.66-18.26 28.61 4.71 21.41 4.91 37.41 4.7 61.6-.11 13.27 10.55 24.09 23.8 24.2h.2c13.17 0 23.89-10.61 24-23.8.18-22.18.4-44.11-5.83-72.34zm-40.12-90.72C417.29 43.46 337.6 1.29 252.81.02 183.02-.82 118.47 24.91 70.46 72.94 24.09 119.37-.9 181.04.14 246.65l-.12 21.47c-.39 13.25 10.03 24.31 23.28 24.69.23.02.48.02.72.02 12.92 0 23.59-10.3 23.97-23.3l.16-23.64c-.83-52.5 19.16-101.86 56.28-139 38.76-38.8 91.34-59.67 147.68-58.86 69.45 1.03 134.73 35.56 174.62 92.39 7.61 10.86 22.56 13.45 33.42 5.86 10.84-7.62 13.46-22.59 5.84-33.43z"})))}var z,K,M,F,_,q,V,G,X,J,Y,$,Q,Z=c.forwardRef(L),ee=(n.p,b.d.div(z||(z=Object(f.a)(["\n    h2 {\n        color: ",";\n        font-size: 25px;\n    }\n    p {\n        color: ",";\n    }\n"])),(function(e){return e.theme.wallet.text.primary}),(function(e){return e.theme.wallet.text.secondary}))),te=Object(b.d)(B.c)(K||(K=Object(f.a)(["\n    position: relative;\n    width: auto;\n    margin: 30px auto;\n    padding: 20px 30px;\n\n    svg {\n        fill: ",";\n    }\n\n    @media (max-width: 768px) {\n        font-size: 16px;\n        padding: 15px 20px;\n    }\n\n    :disabled {\n        cursor: not-allowed;\n        box-shadow: none;\n        ::after {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: ",";\n            z-index: 10;\n        }\n    }\n"])),(function(e){return e.theme.buttons.primary.color}),(function(e){return e.theme.buttons.primary.disabledOverlay})),ne=b.d.div(M||(M=Object(f.a)(["\n    width: 48px;\n    height: 48px;\n    margin: auto;\n"]))),re=function(){var e,t=Object(c.useContext)(k.a),n=Object(c.useState)(!1),r=Object(l.a)(n,2),a=r[0],o=r[1],s=Object(c.useState)(!1),u=Object(l.a)(s,2),p=u[0],f=u[1],b=function(){"visible"===document.visibilityState?o(!0):o(!1)},m=function(){var e=Object(T.a)(Object(R.a)().mark((function e(){return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,t.signIn();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),C.a.error({title:"Authentication Error",content:"Cannot get Credential from your device",centered:!0});case 9:f(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(T.a)(Object(R.a)().mark((function e(){return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,t.signIn();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:f(!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return"visible"===document.visibilityState&&o(!0),document.addEventListener("visibilitychange",b),function(){document.removeEventListener("visibilitychange",b)}}),[]),Object(c.useEffect)((function(){a&&t&&g()}),[a]),e=t?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"This wallet can be unlocked with your"," ",i.a.createElement("strong",null,"fingerprint / device pin")),i.a.createElement(te,{onClick:m,disabled:!!p},i.a.createElement(ne,null,i.a.createElement(Z,null)),"Unlock"),i.a.createElement("div",null,p?i.a.createElement(d.a,{tip:"loading authenticator"}):"")):i.a.createElement("p",null,"Authentication is not supported"),i.a.createElement(ee,null,i.a.createElement("h2",null,i.a.createElement(h.h,null)," Wallet Unlock"),e)},ae=function(e){var t=e.children,n=Object(c.useContext)(k.a);if(n){var r=n.loading,a=n.isAuthenticationRequired,o=n.isSignedIn;if(r)return i.a.createElement("p",null,"Loading authentication data...");if(void 0===a)if(!new URL(window.location).searchParams.get("uri"))return i.a.createElement(U,null);if(a&&!o)return i.a.createElement(re,null)}return i.a.createElement(i.a.Fragment,null,t)},oe=["active"],ce=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(9)]).then(n.bind(null,980))})),ie=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,985))})),se=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,971))})),ue=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(17),n.e(14)]).then(n.bind(null,972))})),le=Object(c.lazy)((function(){return Promise.all([n.e(8),n.e(15)]).then(n.bind(null,973))})),pe=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,974))})),fe=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(10),n.e(16)]).then(n.bind(null,983))})),de=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,975))})),he=Object(c.lazy)((function(){return n.e(12).then(n.bind(null,976))})),be=Object(b.b)(F||(F=Object(f.a)(["    \n    .ant-modal-wrap > div > div.ant-modal-content > div > div > div.ant-modal-confirm-btns > button, .ant-modal > button, .ant-modal-confirm-btns > button, .ant-modal-footer > button, #cropControlsConfirm {\n        border-radius: 8px;\n        background-color: ",";\n        color: ",";\n        font-weight: bold;\n    }    \n    \n    .ant-modal-wrap > div > div.ant-modal-content > div > div > div.ant-modal-confirm-btns > button:hover,.ant-modal-confirm-btns > button:hover, .ant-modal-footer > button:hover, #cropControlsConfirm:hover {\n        color: ",";\n        transition: color 0.3s;\n        background-color: ",";\n    }\n    \n    .ant-spin-text {\n        font-family: 'Plus Jakarta Sans', sans-serif;\n        font-weight: bold;\n        margin-top: 40px;\n        font-size: 16px;\n        color: ",";\n    }\n\n    .selectedCurrencyOption {\n        text-align: left;\n        color: "," !important;\n        background-color: "," !important;\n    }\n    .cashLoadingIcon {\n        color: "," !important;\n        font-size: 48px !important;\n    }\n    .selectedCurrencyOption:hover {\n        color: "," !important;\n        background-color: "," !important;\n    }\n    #addrSwitch, #cropSwitch {\n        .ant-switch-checked {\n            background-color: white !important;\n        }\n    }\n    #addrSwitch.ant-switch-checked, #cropSwitch.ant-switch-checked {\n        background-image: "," !important;\n    }\n\n    .ant-slider-rail {\n        background-color: "," !important;\n    }\n    .ant-slider-track {\n        background-color: "," !important;\n    }\n"])),(function(e){return e.theme.modals.buttons.background}),(function(e){return e.theme.wallet.text.secondary}),(function(e){return e.theme.primary}),(function(e){return e.theme.modals.buttons.background}),(function(e){return e.theme.wallet.text.secondary}),(function(e){return e.theme.wallet.text.secondary}),(function(e){return e.theme.contrast}),(function(e){return e.theme.primary}),(function(e){return e.theme.contrast}),(function(e){return e.theme.primary}),(function(e){return e.theme.buttons.primary.backgroundImage}),(function(e){return e.theme.forms.border}),(function(e){return e.theme.primary})),me=b.d.div(_||(_=Object(f.a)(["\n    text-align: center;\n    font-family: 'Plus Jakarta Sans', sans-serif;\n    background-color: ",";\n"])),(function(e){return e.theme.app.background})),ge=b.d.div(q||(q=Object(f.a)(["\n    z-index: 2999;\n    background-color: ",";\n    border-radius: 20px 20px 0 0;\n    position: fixed;\n    bottom: 0;\n    width: 500px;\n    box-shadow: 0px -34px 20px rgba(0, 0, 0, 0.02), 0px -15px 15px rgba(0, 0, 0, 0.03), 0px -4px 8px rgba(0, 0, 0, 0.03), 0px 0px 0px rgba(0, 0, 0, 0.03);\n    @media (max-width: 768px) {\n        width: 100%;\n    }\n"])),(function(e){return e.theme.footer.background})),ve=b.d.button(V||(V=Object(f.a)(["\n    :focus,\n    :active {\n        outline: none;\n    }\n    cursor: pointer;\n    padding: 24px 12px 12px 12px;\n    margin: 0 28px;\n    @media (max-width: 475px) {\n        margin: 0 20px;\n    }\n    @media (max-width: 420px) {\n        margin: 0 12px;\n    }\n    @media (max-width: 350px) {\n        margin: 0 8px;\n    }\n    background-color: ",";\n    border: none;\n    font-size: 10.5px;\n    font-weight: bold;\n    .anticon {\n        display: block;\n        color: ",";\n        font-size: 24px;\n        margin-bottom: 6px;\n    }\n    ","\n"])),(function(e){return e.theme.footer.background}),(function(e){return e.theme.footer.navIconInactive}),(function(e){var t=e.active,n=Object(p.a)(e,oe);return t&&"    \n        color: ".concat(n.theme.primary,";\n        .anticon {\n            color: ").concat(n.theme.primary,";\n        }\n  ")})),xe=b.d.div(G||(G=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    min-height: 100vh;\n    background: #d5d5d5;\n"]))),we=b.d.div(X||(X=Object(f.a)(["\n    position: relative;\n    width: 500px;\n    background-color: ",";\n    min-height: 100vh;\n    padding: 10px 30px 120px 30px;\n    background: ",";\n    box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1), 0px 3px 6px rgba(0, 0, 0, 0.05);\n    @media (max-width: 768px) {\n        width: 100%;\n        -webkit-box-shadow: none;\n        -moz-box-shadow: none;\n        box-shadow: none;\n    }\n"])),(function(e){return e.theme.footerBackground}),(function(e){return e.theme.wallet.background})),ye=b.d.div(J||(J=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    padding: 10px 0 0px;\n    margin-bottom: 20px;\n    justify-content: flex-end;\n\n    a {\n        color: ",";\n\n        :hover {\n            color: ",";\n        }\n    }\n\n    @media (max-width: 768px) {\n        a {\n            font-size: 12px;\n        }\n        padding: 10px 0 20px;\n    }\n"])),(function(e){return e.theme.wallet.text.secondary}),(function(e){return e.theme.primary})),ke=b.d.img(Y||(Y=Object(f.a)(["\n    width: 55px;\n    margin-left: 8px;\n"]))),Oe=b.d.img($||($=Object(f.a)(["\n    width: 70px;\n"]))),Se=b.d.img(Q||(Q=Object(f.a)(["\n    position: fixed;\n    bottom: -195px;\n    margin: 0;\n    right: 10%;\n    transition-property: bottom;\n    transition-duration: 1.5s;\n    transition-timing-function: ease-out;\n\n    :hover {\n        bottom: 0;\n    }\n\n    @media screen and (max-width: 1250px) {\n        display: none;\n    }\n"]))),je=function(){var e=i.a.useContext(k.c),t=e.wallet,n=e.loading,r=Object(c.useState)(!1),a=Object(l.a)(r,2),o=a[0],s=a[1],u=Object(O.f)(t),p=Object(E.h)(),f=Object(E.g)(),S=p&&p.pathname?p.pathname.substr(1):"",R=!!u&&function(e,t){var n,r=Object(A.a)(e);try{for(r.s();!(n=r.n()).done;)if(n.value.tokenId===t)return!0}catch(a){r.e(a)}finally{r.f()}return!1}(t.state.tokens,"50d8292c6255cda7afc6c8566fed3cf42a2794e9619740fe8f4c95431271410e"),T=i.a.createElement(h.d,null,h.b),C=function(e){window.history.replaceState(null,"",window.location.origin),f.push("/".concat(e))};return i.a.createElement(b.a,{theme:m},i.a.createElement(be,null),i.a.createElement(d.a,{spinning:n||o||t&&!u,indicator:h.b,tip:"string"===typeof o?o:""},i.a.createElement(me,null,i.a.createElement(xe,null,i.a.createElement(we,null,i.a.createElement(ye,null,R&&i.a.createElement(Se,{src:I,alt:"tabcash"}),i.a.createElement("a",{href:"https://e.cash/",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(Oe,{src:P,alt:"abc"})),i.a.createElement(ke,{src:y,alt:"cashtab"})),i.a.createElement(ae,null,i.a.createElement(j,{name:t.name}),i.a.createElement(c.Suspense,{fallback:T},i.a.createElement(E.d,null,i.a.createElement(E.b,{path:"/wallet"},i.a.createElement(ce,null)),i.a.createElement(E.b,{path:"/tokens"},i.a.createElement(ie,{passLoadingStatus:s})),i.a.createElement(E.b,{path:"/send"},i.a.createElement(se,{passLoadingStatus:s})),i.a.createElement(E.b,{path:"/send-token/:tokenId",render:function(e){return i.a.createElement(ue,{tokenId:e.match.params.tokenId,passLoadingStatus:s})}}),i.a.createElement(E.b,{path:"/checkout"},i.a.createElement(le,{passLoadingStatus:s})),i.a.createElement(E.b,{path:"/sendBip70"},i.a.createElement(pe,{passLoadingStatus:s})),i.a.createElement(E.b,{path:"/selfMint"},i.a.createElement(de,{passLoadingStatus:s})),i.a.createElement(E.b,{path:"/configure"},i.a.createElement(fe,null)),i.a.createElement(E.a,{exact:!0,from:"/",to:"/wallet"}),i.a.createElement(E.b,{component:he}))))),t?i.a.createElement(ge,null,i.a.createElement(ve,{active:"wallet"===S,onClick:function(){return C("wallet")}},i.a.createElement(g.a,null),"Wallet"),i.a.createElement(ve,{active:"tokens"===S,onClick:function(){return C("tokens")}},i.a.createElement(v.a,null),"eTokens"),i.a.createElement(ve,{active:"send"===S,onClick:function(){return C("send")}},i.a.createElement(x.a,null),"Send"),i.a.createElement(ve,{active:"configure"===S,onClick:function(){return C("configure")}},i.a.createElement(w.a,null),"Settings")):null))))},Ee=n(193),Ie=n(239);u.a.render(i.a.createElement(k.b,null,i.a.createElement(k.d,null,i.a.createElement(Ee.a,null,Ie.b.init()&&i.a.createElement(Ie.b.RouteTracker,null),i.a.createElement(je,null)))),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){return navigator.serviceWorker.register("/serviceWorker.js").catch((function(){return null}))}))},90:function(e,t,n){"use strict";n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return A})),n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return T}));var r=n(0),a=n.n(r),o=n(7),c=n(17),i=n(8),s=function(e,t){var n=Object(r.useRef)(e);Object(r.useEffect)((function(){n.current=e})),Object(r.useEffect)((function(){var e=null,r=function r(){var a=n.current();a instanceof Promise?a.then((function(){e=setTimeout(r,t)})):e=setTimeout(r,t)};return null!==e?(e=setTimeout(r,t),function(){return clearTimeout(e)}):void r()}),[t])},u=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e}),[e]),t.current},l=n(309),p=n(29),f=n.n(p),d=n(42),h=n(310),b=n(35),m=n.n(b),g=n(13),v=n(442),x=n.n(v),w=n(196),y=n(57),k=n.n(y),O=n(14),S=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],p=Object(r.useState)(!1),b=Object(i.a)(p,2),v=b[0],y=b[1],S=Object(r.useState)(null),j=Object(i.a)(S,2),E=j[0],I=j[1],P=Object(r.useState)(!1),A=Object(i.a)(P,2),R=A[0],T=A[1],C=Object(r.useState)(null),B=Object(i.a)(C,2),D=B[0],U=B[1],N=Object(l.a)(),W=N.getUtxosBcash,H=N.getSlpBalancesAndUtxosBcash,L=N.getTxHistoryBcash,z=N.parseTxData,K=Object(r.useState)(!0),M=Object(i.a)(K,2),F=M[0],_=M[1],q=Object(d.f)(n)?n.state:{balances:{},tokens:[],utxos:null},V=q.balances,G=q.tokens,X=(q.utxos,u(V)),J=u(G),Y=function(e){var t=e.nonSlpUtxos.reduce((function(e,t){return e+t.value}),0);return{totalBalanceInSatoshis:t,totalBalance:Object(d.c)(t)}},$=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r,a,c,i,s,u,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.masterHDNode,r=t.path,a=n.derivePath(r),c=a.toPublic().publicKey.toString("hex"),i=O.KeyRing.fromPrivate(a.privateKey),s=i.getAddress("string"),u=k.a.decode(s),l=k.a.encode("etoken",u.type,u.hash),e.abrupt("return",{publicKey:c,cashAddress:s,slpAddress:l,fundingWif:i.toSecret(),fundingAddress:l,legacyAddress:i.getAddress("base58")});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:if(n=e.sent,!Object(d.f)(n)){e.next=8;break}return r=Object(d.g)(n.state),n.state=r,t(n),e.abrupt("return",_(!1));case 8:t(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r,c,i,s,u,l,p,f,d,h=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wallet,r=h.length>1&&void 0!==h[1]&&h[1],e.prev=2,n){e.next=5;break}return e.abrupt("return");case 5:return i=[n.Path245.cashAddress,n.Path145.cashAddress,n.Path1899.cashAddress],e.next=8,W(i);case 8:if(s=e.sent,!x()(s,null===n||void 0===n||null===(c=n.state)||void 0===c?void 0:c.utxos)||r){e.next=13;break}return T(!1),e.abrupt("return");case 13:return e.next=15,H(s);case 15:return u=e.sent,e.next=18,L(i);case 18:if(l=e.sent,p=z(n,l),"undefined"!==typeof u){e.next=23;break}throw console.log("slpBalancesAndUtxos is undefined"),new Error("slpBalancesAndUtxos is undefined");case 23:f=u.tokens,(d={balances:{},tokens:[],slpBalancesAndUtxos:[]}).slpBalancesAndUtxos=u,d.balances=Y(u),d.tokens=f,d.parsedTxHistory=p,d.utxos=s,n.state=d,a(n),re(n,d),T(!1),e.next=41;break;case 36:e.prev=36,e.t0=e.catch(2),console.log("Error in update({wallet})"),console.log(e.t0),T(!0);case 41:case"end":return e.stop()}}),e,null,[[2,36]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(c.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.getItem("wallet");case 3:t=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error in getActiveWalletFromLocalForage",e.t0),t=null;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(c.a)(Object(o.a)().mark((function e(){var t,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee();case 3:if(!(n=e.sent)){e.next=10;break}if(!Object(d.e)(n)){e.next=10;break}return console.log("Wallet does not have Path1899 or does not have public key"),e.next=9,ne(n);case 9:n=e.sent;case 10:if(n){e.next=19;break}if(null===(n=JSON.parse(window.localStorage.getItem("wallet")))){e.next=19;break}return e.next=15,ae(n);case 15:return t=e.sent,e.next=18,m.a.setItem("wallet",t);case 18:return e.abrupt("return",t);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log("Error in getWallet()",e.t0);case 24:if(null!==n&&n){e.next=32;break}return e.next=27,ae(n);case 27:return t=e.sent,e.next=30,m.a.setItem("wallet",t);case 30:e.next=33;break;case 32:t=n;case 33:return e.abrupt("return",t);case 34:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r,a,c,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"mainnet",n=t.mnemonic,r=O.HDPrivateKey.fromPhrase(n),e.next=5,$({masterHDNode:r,path:"m/44'/245'/0'/0/0"});case 5:return a=e.sent,e.next=8,$({masterHDNode:r,path:"m/44'/145'/0'/0/0"});case 8:return c=e.sent,e.next=11,$({masterHDNode:r,path:"m/44'/1899'/0'/0/0"});case 11:return i=e.sent,t.Path245=a,t.Path145=c,t.Path1899=i,e.prev=15,e.next=18,m.a.setItem("wallet",t);case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(15),console.log("Error setting wallet to wallet indexedDb in migrateLegacyWallet()"),console.log(e.t0);case 24:return e.abrupt("return",t);case 25:case"end":return e.stop()}}),e,null,[[15,20]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t,n){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state=n,e.prev=1,e.next=4,m.a.setItem("wallet",t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("Error in writeWalletState()"),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r,a,c,i,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return"mainnet",n=t.mnemonic,r=O.HDPrivateKey.fromPhrase(n),e.next=7,$({masterHDNode:r,path:"m/44'/245'/0'/0/0"});case 7:return a=e.sent,e.next=10,$({masterHDNode:r,path:"m/44'/145'/0'/0/0"});case 10:return c=e.sent,e.next=13,$({masterHDNode:r,path:"m/44'/1899'/0'/0/0"});case 13:return i=e.sent,s=i.cashAddress.slice(12,17),t&&t.name&&(s=t.name),e.abrupt("return",{mnemonic:t.mnemonic,name:s,Path245:a,Path145:c,Path1899:i});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.getItem("savedWallets");case 3:null===(n=e.sent)&&(n=[]),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error in getSavedWallets"),console.log(e.t0),n=[];case 12:for(r=0;r<n.length;r+=1)"undefined"!==typeof t&&t.name&&n[r].name===t.name&&n.splice(r,1);return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r,a,c,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.getItem("wallet");case 3:n=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log('Error in localforage.getItem("wallet") in activateWallet()'),e.abrupt("return",!1);case 10:return e.prev=10,e.next=13,m.a.getItem("savedWallets");case 13:r=e.sent,e.next=20;break;case 16:return e.prev=16,e.t1=e.catch(10),console.log('Error in localforage.getItem("savedWallets") in activateWallet()'),e.abrupt("return",!1);case 20:for(a=!1,c=0;c<r.length;c+=1)r[c].name===n.name&&(a=!0,Object(d.e)(r[c])&&(r[c].Path1899=n.Path1899,r[c].Path145=n.Path145,r[c].Path245=n.Path245),r[c].state=n.state);return e.prev=22,e.next=25,m.a.setItem("savedWallets",r);case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(22),console.log('Error in localforage.setItem("savedWallets") in activateWallet() for unmigrated wallet');case 30:if(a){e.next=41;break}return console.log("Wallet is not in saved Wallets, adding"),r.push(n),e.prev=33,e.next=36,m.a.setItem("savedWallets",r);case 36:e.next=41;break;case 38:e.prev=38,e.t3=e.catch(33),console.log('Error in localforage.setItem("savedWallets") in activateWallet()');case 41:if(!Object(d.e)(t)){e.next=50;break}return console.log("Case 2: Wallet to activate does not have Path1899 or does not have public key in each Path"),console.log("Wallet to activate from SavedWallets does not have Path1899 or does not have public key in each Path"),console.log("walletToActivate",t),e.next=47,ne(t);case 47:t=e.sent,e.next=59;break;case 50:return e.prev=50,e.next=53,m.a.setItem("wallet",t);case 53:e.next=59;break;case 55:return e.prev=55,e.t4=e.catch(50),console.log('Error in localforage.setItem("wallet", walletToActivate) in activateWallet()'),e.abrupt("return",!1);case 59:return Object(d.f)(t)&&(i=Object(d.g)(t.state),t.state=i),e.abrupt("return",t);case 61:case"end":return e.stop()}}),e,null,[[0,6],[10,16],[22,27],[33,38],[50,55]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t,n){var r,a,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.getItem("savedWallets");case 3:r=e.sent,e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log('Error in await localforage.getItem("savedWallets") in renameWallet'),console.log(e.t0),e.abrupt("return",!1);case 11:a=0;case 12:if(!(a<r.length)){e.next=18;break}if(r[a].name!==n){e.next=15;break}return e.abrupt("return",!1);case 15:a+=1,e.next=12;break;case 18:for(c=0;c<r.length;c+=1)r[c].name===t&&(r[c].name=n);return e.prev=19,e.next=22,m.a.setItem("savedWallets",r);case 22:e.next=28;break;case 24:return e.prev=24,e.t1=e.catch(19),console.log('Error in localforage.setItem("savedWallets", savedWallets) in renameWallet()'),e.abrupt("return",!1);case 28:return e.abrupt("return",!0);case 29:case"end":return e.stop()}}),e,null,[[0,6],[19,24]])})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.getItem("savedWallets");case 3:n=e.sent,e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log('Error in await localforage.getItem("savedWallets") in deleteWallet'),console.log(e.t0),e.abrupt("return",!1);case 11:for(r=!1,a=0;a<n.length;a+=1)n[a].name===t.name&&n[a].mnemonic===t.mnemonic&&(n.splice(a,1),r=!0);if(r){e.next=15;break}return e.abrupt("return",!1);case 15:return e.prev=15,e.next=18,m.a.setItem("savedWallets",n);case 18:e.next=24;break;case 20:return e.prev=20,e.t1=e.catch(15),console.log('Error in localforage.setItem("savedWallets", savedWallets) in deleteWallet()'),e.abrupt("return",!1);case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}}),e,null,[[0,6],[15,20]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r,a,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"english",n=t||new O.Mnemonic({language:"english"}),e.next=4,ae({mnemonic:n.toString()});case 4:return r=e.sent,e.prev=5,e.next=8,m.a.getItem("savedWallets");case 8:null===(a=e.sent)&&(a=[]),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(5),console.log('Error in savedWallets = await localforage.getItem("savedWallets") in addNewSavedWallet()'),console.log(e.t0),console.log("savedWallets in error state",a);case 17:if(!t){e.next=27;break}c=0;case 19:if(!(c<a.length)){e.next=27;break}if(a[c].mnemonic!==t){e.next=24;break}return console.log("Error: this wallet already exists in savedWallets"),console.log("Wallet not being added."),e.abrupt("return",!1);case 24:c+=1,e.next=19;break;case 27:return a.push(r),e.prev=28,e.next=31,m.a.setItem("savedWallets",a);case 31:e.next=38;break;case 33:e.prev=33,e.t1=e.catch(28),console.log('Error in localforage.setItem("savedWallets", activeWallet) called in createWallet with '.concat(t)),console.log("savedWallets",a),console.log(e.t1);case 38:return e.abrupt("return",!0);case 39:case"end":return e.stop()}}),e,null,[[5,12],[28,33]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"english",n=t||new O.Mnemonic({language:"english"}),e.next=4,ae({mnemonic:n.toString()});case 4:return r=e.sent,e.prev=5,e.next=8,m.a.setItem("wallet",r);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),console.log("Error setting wallet to wallet indexedDb in createWallet()"),console.log(e.t0);case 14:return e.prev=14,e.next=17,m.a.setItem("savedWallets",[r]);case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(14),console.log("Error setting wallet to savedWallets indexedDb in createWallet()"),console.log(e.t1);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,null,[[5,10],[14,19]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(c.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.getItem("settings");case 3:if(null!==(t=e.sent)){e.next=8;break}return m.a.setItem("settings",g.a.defaultSettings),y(g.a.defaultSettings),e.abrupt("return",g.a.defaultSettings);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(0),console.log("Error getting cashtabSettings",e.t0),y(g.a.defaultSettings),e.abrupt("return",g.a.defaultSettings);case 15:if(!Object(h.d)(t)){e.next=18;break}return y(t),e.abrupt("return",t);case 18:return y(g.a.defaultSettings),e.abrupt("return",g.a.defaultSettings);case 20:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t);case 2:n=setInterval((function(){Ie(t)}),6e4),U(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(c.a)(Object(o.a)().mark((function e(t,n){var r,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,m.a.getItem("settings");case 4:r=e.sent,e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log("Error in changeCashtabSettings",e.t0),I(null),_(!1),e.abrupt("return");case 13:return Object.keys(r).includes(t)&&g.a.settingsValidation[t].includes(n)&&((a=r)[t]=n),y(a),"fiatCurrency"===t&&(clearInterval(D),de(n)),e.prev=16,e.next=19,m.a.setItem("settings",a);case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(16),console.log("Error writing newSettings object to localforage in changeCashtabSettings",e.t1),console.log("newSettings",a);case 25:_(!1);case 26:case"end":return e.stop()}}),e,null,[[1,7],[16,21]])})));return function(t,n){return e.apply(this,arguments)}}();if(X&&V&&"totalBalance"in X&&"totalBalance"in V&&new f.a(V.totalBalance).minus(X.totalBalance).gt(0)&&Object(w.g)(V,X,v,E),G&&G[0]&&G[0].balance&&J&&J[0]&&J[0].balance)if(G.length>J.length){var be=G.map((function(e){return e.tokenId})),me=J.map((function(e){return e.tokenId})),ge=be.filter((function(e){return!me.includes(e)}))[0],ve=G.findIndex((function(e){return e.tokenId===ge})),xe=G[ve].balance.div(Math.pow(G[ve].info.decimals,10)).toString(),we=G[ve].info.ticker,ye=G[ve].info.name;xe>0&&Object(w.a)(g.a,we,xe,ye)}else for(var ke=0;ke<G.length;ke+=1)if(G[ke].balance.gt(J[ke].balance)){if(J[ke].tokenId!==G[ke].tokenId){console.log("TokenIds do not match, breaking from SLP notifications");break}console.log("tokens[i]",G[ke]);var Oe=G[ke].balance.minus(J[ke].balance).div(Math.pow(10,G[ke].info.decimals)),Se=G[ke].info.ticker,je=G[ke].info.name;Object(w.a)(g.a,Se,Oe,je)}var Ee=function(){var e=Object(c.a)(Object(o.a)().mark((function e(){var t,n,r=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],console.log("forcing wallet update"),e.next=4,te();case 4:n=e.sent,Z({wallet:n},t).finally((function(){_(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s(Object(c.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:t=e.sent,Z({wallet:t}).finally((function(){_(!1)}));case 4:case"end":return e.stop()}}),e)}))),1e4);var Ie=function(){var e=Object(c.a)(Object(o.a)().mark((function e(){var t,n,r,a,c,i,s=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:v?v.fiatCurrency:"usd",n=g.a.coingeckoId,r="https://api.coingecko.com/api/v3/simple/price?ids=".concat(n,"&vs_currencies=").concat(t,"&include_last_updated_at=true"),e.prev=3,e.next=6,fetch(r);case 6:a=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("Error fetching BCH Price"),console.log(e.t0);case 13:return e.prev=13,e.next=16,a.json();case 16:c=e.sent,i=c[n][t],I("number"===typeof i?i:null),e.next=26;break;case 22:e.prev=22,e.t1=e.catch(13),console.log("Error parsing price API response to JSON"),console.log(e.t1);case 26:case"end":return e.stop()}}),e,null,[[3,9],[13,22]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(Object(c.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(a),e.next=3,fe();case 3:t=e.sent,de(t.fiatCurrency);case 5:case"end":return e.stop()}}),e)}))),[]),{wallet:n,fiatPrice:E,loading:F,apiError:R,cashtabSettings:v,changeCashtabSettings:he,getActiveWalletFromLocalForage:ee,forceWalletUpdate:Ee,validateMnemonic:function(e){try{return O.Mnemonic.fromPhrase(e).toString()===e}catch(t){return console.log(t),!1}},getWalletDetails:ae,getSavedWallets:oe,migrateLegacyWallet:ne,createWallet:function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,le(t);case 3:n=e.sent,a(n),Z({wallet:n}).finally((function(){return _(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),activateWallet:function(){var e=Object(c.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,ce(t);case 3:n=e.sent,a(n),Object(d.f)(t)?_(!1):Z({wallet:n}).finally((function(){return _(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addNewSavedWallet:ue,renameWallet:ie,deleteWallet:se}},j=function(e){var t=new Uint8Array(e).reduce((function(e,t){return e+String.fromCharCode(t)}),"");return window.btoa(t)},E=function(e){var t=window.atob(e);return Uint8Array.from(t,(function(e){return e.charCodeAt(0)})).buffer},I=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(void 0),u=Object(i.a)(s,2),l=u[0],p=u[1],f=Object(r.useState)(null),d=Object(i.a)(f,2),h=d[0],b=d[1],v=Object(r.useState)(!1),x=Object(i.a)(v,2),w=x[0],y=x[1],k=Object(r.useState)(Date.now().toString(16)),O=Object(i.a)(k,2),S=O[0],I=O[1],P=Object(r.useState)(!0),A=Object(i.a)(P,2),R=A[0],T=A[1],C=function(){var e=Object(c.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.getItem("authenticationConfig");case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.error('Error is localforange.getItem("authenticatonConfig") in loadAuthenticationConfigFromLocalStorage() in useWebAuthentication()'),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),B=function(){try{return m.a.setItem("authenticationConfig",{isAuthenticationRequired:l,userId:S,credentialId:h})}catch(e){throw console.error('Error is localforange.setItem("authenticatonConfig") in saveAuthenticationConfigToLocalStorage() in useWebAuthentication()'),e}};Object(r.useEffect)(Object(c.a)(Object(o.a)().mark((function e(){var t,n,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();case 2:if(!(t=e.sent)){e.next=13;break}return e.next=6,C();case 6:return null===(n=e.sent)?B():(I(n.userId),b(n.credentialId),p(n.isAuthenticationRequired)),r=function(){"visible"!==document.visibilityState&&y(!1)},document.addEventListener("visibilitychange",r),a(t),T(!1),e.abrupt("return",(function(){document.removeEventListener("visibilitychange",r)}));case 13:case"end":return e.stop()}}),e)}))),[]),Object(r.useEffect)(Object(c.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,B();case 4:case"end":return e.stop()}}),e)}))),[l,h]);var D={challenge:Uint8Array.from("cashtab-wallet-for-ecash",(function(e){return e.charCodeAt(0)})),rp:{name:g.a.name,id:document.domain},user:{id:Uint8Array.from(S,(function(e){return e.charCodeAt(0)})),name:"Local User",displayName:"Local User"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-35,type:"public-key"},{alg:-36,type:"public-key"},{alg:-257,type:"public-key"},{alg:-258,type:"public-key"},{alg:-259,type:"public-key"},{alg:-37,type:"public-key"},{alg:-38,type:"public-key"},{alg:-39,type:"public-key"},{alg:-8,type:"public-key"}],authenticatorSelection:{userVerification:"required",authenticatorAttachment:"platform",requireResidentKey:!1},timeout:6e4,attestation:"none",excludeCredentials:[],extensions:{}},U={challenge:Uint8Array.from("cashtab-wallet-for-ecash",(function(e){return e.charCodeAt(0)})),timeout:6e4,allowCredentials:[{type:"public-key",id:E(h),transports:["internal"]}],userVerification:"required",extensions:{}},N={isAuthenticationRequired:l,credentialId:h,isSignedIn:w,loading:R,turnOnAuthentication:function(){h&&p(!0)},turnOffAuthentication:function(){p(!1)},signUp:function(){var e=Object(c.a)(Object(o.a)().mark((function e(){var t,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.credentials.create({publicKey:D});case 3:if(!(t=e.sent)){e.next=11;break}n=j(t.rawId),y(!0),b(n),p(!0),e.next=12;break;case 11:throw new Error("Error: navigator.credentials.create() returns null, in signUp()");case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(c.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.credentials.get({publicKey:U});case 3:if(!(t=e.sent)){e.next=9;break}j(t.rawId)===h&&y(!0),e.next=10;break;case 9:throw new Error("Error: navigator.credentials.get() returns null, signIn()");case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),signOut:function(){y(!1)}};return n||l?N:null},P=a.a.createContext(),A=function(e){var t=e.children,n=S();return a.a.createElement(P.Provider,{value:n},t)},R=a.a.createContext(),T=function(e){var t=e.children,n=I();return a.a.createElement(R.Provider,{value:n},t)}}},[[458,3,4]]]);
//# sourceMappingURL=main.003f9f97.chunk.js.map