(window.webpackJsonpcashtab=window.webpackJsonpcashtab||[]).push([[13],{807:function(e,t,n){"use strict";n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"g",(function(){return b})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return x}));var a,r,o,c,i,l,s,u=n(37),m=n(36),d=m.d.div(a||(a=Object(u.a)(["\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 400px;\n    flex-direction: column;\n\n    svg {\n        width: 50px;\n        height: 50px;\n        fill: ",";\n    }\n"])),(function(e){return e.theme.primary})),f=m.d.div(r||(r=Object(u.a)(["\n    color: ",";\n    width: 100%;\n    font-size: 30px;\n    font-weight: bold;\n    @media (max-width: 768px) {\n        font-size: 23px;\n    }\n"])),(function(e){return e.theme.wallet.text.primary})),p=m.d.div(o||(o=Object(u.a)(["\n    color: ",";\n    width: 100%;\n    font-size: 18px;\n    margin-bottom: 20px;\n    font-weight: bold;\n    @media (max-width: 768px) {\n        font-size: 16px;\n    }\n"])),(function(e){return e.theme.wallet.text.secondary})),b=m.d.div(c||(c=Object(u.a)(["\n    color: ",";\n    width: 100%;\n    font-size: 14px;\n    margin-bottom: 5px;\n"])),(function(e){return e.theme.wallet.text.primary})),h=m.d.span(i||(i=Object(u.a)(["\n    font-weight: bold;\n"]))),g=m.d.p(l||(l=Object(u.a)(["\n    color: "," !important;\n"])),(function(e){return e.theme.forms.error})),x=m.d.div(s||(s=Object(u.a)(["\n    color: ",";\n    width: 100%;\n    font-size: 14px;\n    margin-bottom: 10px;\n    font-weight: bold;\n    @media (max-width: 768px) {\n        font-size: 12px;\n    }\n"])),(function(e){return e.theme.wallet.text.secondary}))},811:function(e,t,n){"use strict";var a=n(0),r=n(60),o=n(807);t.a=function(){return a.createElement(a.Fragment,null,a.createElement(o.a,null,a.createElement("b",null,"API connection lost."),a.createElement("br",null)," Re-establishing connection..."),a.createElement(r.a,null))}},815:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"i",(function(){return W})),n.d(t,"f",(function(){return V})),n.d(t,"e",(function(){return H})),n.d(t,"d",(function(){return Y})),n.d(t,"b",(function(){return G})),n.d(t,"g",(function(){return K})),n.d(t,"h",(function(){return X})),n.d(t,"c",(function(){return $}));var a,r,o,c,i,l,s,u=n(31),m=n(37),d=n(0),f=n.n(d),p=n(978),b=n(979),h=n(977),g=n(60),x=n(36),w=n(7),v=n(17),k=n(8),O=n(802),j=n(984),y=n(820),E=n(13),S=n(239),C=["loadWithCameraOpen","onScan"],N=x.d.span(a||(a=Object(m.a)(["\n    display: block;\n"]))),P=Object(x.d)(O.a)(r||(r=Object(m.a)(["\n    width: 400px !important;\n    height: 400px !important;\n\n    .ant-modal-close {\n        top: 0 !important;\n        right: 0 !important;\n    }\n"]))),D=x.d.video(o||(o=Object(m.a)(["\n    width: 100%;\n"]))),B=function(e){var t=e.loadWithCameraOpen,n=e.onScan,a=void 0===n?function(){return null}:n,r=Object(u.a)(e,C),o=Object(d.useState)(t),c=Object(k.a)(o,2),i=c[0],l=c[1],s=Object(d.useState)(!1),m=Object(k.a)(s,2),p=m[0],b=m[1],h=Object(d.useState)(null),x=Object(k.a)(h,2),O=x[0],B=x[1],F=function(e){null!==e&&(e.reset(),e.stop(),B(e=null))},I=function(e){var t="unknown",n={};if(Object(E.e)(e)||Object(E.f)(e)){t="address",n={address:e};var a=E.a.ticker;e.split(E.a.tokenPrefix).length>1&&(a=E.a.tokenTicker),Object(S.a)("ScanQRCode.js","Address Scanned",a)}return{type:t,values:n}},z=function(){var e=Object(v.a)(Object(w.a)().mark((function e(){var t,n,r;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new y.BrowserQRCodeReader,B(t),e.prev=2,e.next=5,t.getVideoInputDevices();case 5:return e.sent,e.next=8,t.decodeFromInputVideoDevice(void 0,"test-area-qr-code-webcam");case 8:if(n=e.sent,"address"!==(r=I(n.text)).type){e.next=14;break}return l(!1),a(r.values.address),e.abrupt("return",F(t));case 14:e.next=23;break;case 16:e.prev=16,e.t0=e.catch(2),console.log("Error in QR scanner:"),console.log(e.t0),console.log(JSON.stringify(e.t0.message)),b(e.t0),F(t);case 23:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}();return f.a.useEffect((function(){i?z():(b(!1),null!==O&&F(O))}),[i]),f.a.createElement(f.a.Fragment,null,f.a.createElement(N,Object.assign({},r,{onClick:function(){return l(!i)}}),f.a.createElement(g.i,null)),f.a.createElement(P,{title:"Scan QR code",visible:i,onCancel:function(){return l(!1)},footer:null},i?f.a.createElement("div",null,p?f.a.createElement(f.a.Fragment,null,f.a.createElement(j.a,{message:"Error",description:"Error in QR scanner. Please ensure your camera is not in use. Due to Apple restrictions on third-party browsers, you must use Safari browser for QR code scanning on an iPhone.",type:"error",showIcon:!0,style:{textAlign:"left"}})):f.a.createElement(D,{id:"test-area-qr-code-webcam"})):null))},F=(n(309),n(112)),I=["onMax","inputProps","selectProps","activeFiatCode"],z=["onMax","inputProps"],R=["onScan","loadWithCameraOpen","inputProps"],U=["inputProps"],A=["inputProps"],T=["inputProps"],M=["inputProps"],J=p.a.TextArea,q=Object(x.c)(c||(c=Object(m.a)(["\n    .ant-input-group-addon {\n        background-color: "," !important;\n        border: 1px solid ",";\n        color: "," !important;\n    }\n    input.ant-input,\n    .ant-select-selection {\n        background-color: "," !important;\n        box-shadow: none !important;\n        border-radius: 4px;\n        font-weight: bold;\n        color: ",";\n        opacity: 1;\n        height: 50px;\n    }\n    textarea.ant-input,\n    .ant-select-selection {\n        background-color: "," !important;\n        box-shadow: none !important;\n        border-radius: 4px;\n        font-weight: bold;\n        color: ",";\n        opacity: 1;\n        height: 50px;\n        min-height: 100px;\n    }\n    .ant-input-affix-wrapper {\n        background-color: ",";\n        border: 1px solid "," !important;\n    }\n    .ant-select-selector {\n        height: 60px !important;\n        border: 1px solid "," !important;\n    }\n    .ant-form-item-has-error\n        > div\n        > div.ant-form-item-control-input\n        > div\n        > span\n        > span\n        > span.ant-input-affix-wrapper {\n        background-color: ",";\n        border-color: "," !important;\n    }\n\n    .ant-form-item-has-error .ant-input,\n    .ant-form-item-has-error .ant-input-affix-wrapper,\n    .ant-form-item-has-error .ant-input:hover,\n    .ant-form-item-has-error .ant-input-affix-wrapper:hover {\n        background-color: ",";\n        border-color: "," !important;\n    }\n\n    .ant-form-item-has-error\n        .ant-select:not(.ant-select-disabled):not(.ant-select-customize-input)\n        .ant-select-selector {\n        background-color: ",";\n        border-color: "," !important;\n    }\n    .ant-select-single .ant-select-selector .ant-select-selection-item,\n    .ant-select-single .ant-select-selector .ant-select-selection-placeholder {\n        line-height: 60px;\n        text-align: left;\n        color: ",";\n        font-weight: bold;\n    }\n    .ant-form-item-has-error .ant-input-group-addon {\n        color: "," !important;\n        border-color: "," !important;\n    }\n    .ant-form-item-explain.ant-form-item-explain-error {\n        color: "," !important;\n    }\n"])),(function(e){return e.theme.forms.addonBackground}),(function(e){return e.theme.forms.border}),(function(e){return e.theme.forms.addonForeground}),(function(e){return e.theme.forms.selectionBackground}),(function(e){return e.theme.forms.text}),(function(e){return e.theme.forms.selectionBackground}),(function(e){return e.theme.forms.text}),(function(e){return e.theme.forms.selectionBackground}),(function(e){return e.theme.wallet.borders.color}),(function(e){return e.theme.wallet.borders.color}),(function(e){return e.theme.forms.selectionBackground}),(function(e){return e.theme.forms.error}),(function(e){return e.theme.forms.selectionBackground}),(function(e){return e.theme.forms.error}),(function(e){return e.theme.forms.selectionBackground}),(function(e){return e.theme.forms.error}),(function(e){return e.theme.forms.text}),(function(e){return e.theme.forms.error}),(function(e){return e.theme.forms.error}),(function(e){return e.theme.forms.error})),_=x.d.div(i||(i=Object(m.a)(["\n    ","\n"])),q),L=x.d.span(l||(l=Object(m.a)(["\n    width: 100%;\n    height: 100%;\n    display: block;\n\n    ","\n"])),(function(e){return e.disabled?"\n      cursor: not-allowed;\n      ":"cursor: pointer;"})),Q=x.d.span(s||(s=Object(m.a)(["\n    background-color: "," !important;\n    border: 1px solid ",";\n    color: "," !important;\n    height: 50px;\n    line-height: 47px;\n\n    * {\n        color: "," !important;\n    }\n    ","\n"])),(function(e){return e.theme.forms.addonBackground}),(function(e){return e.theme.forms.border}),(function(e){return e.theme.forms.addonForeground}),(function(e){return e.theme.forms.addonForeground}),(function(e){return e.disabled?"\n      cursor: not-allowed;\n      ":"cursor: pointer;"})),W=function(e){var t=e.onMax,n=e.inputProps,a=e.selectProps,r=e.activeFiatCode,o=Object(u.a)(e,I),c=b.a.Option,i=[{value:E.a.ticker,label:E.a.ticker},{value:r||"USD",label:r||"USD"}].map((function(e){return d.createElement(c,{key:e.value,value:e.value,className:"selectedCurrencyOption"},e.label)})),l=d.createElement(b.a,Object.assign({defaultValue:E.a.ticker,className:"select-after",style:{width:"30%"}},a),i);return d.createElement(_,null,d.createElement(h.a.Item,o,d.createElement(p.a.Group,{compact:!0},d.createElement(p.a,Object.assign({style:{width:"60%",textAlign:"left"},type:"number",step:1===n.dollar?.01:1/Math.pow(10,E.a.cashDecimals),prefix:1===n.dollar?d.createElement(g.g,null):d.createElement("img",{src:E.a.logo,alt:"",width:16,height:16})},n)),l,d.createElement(Q,{style:{width:"10%",height:"60px",lineHeight:"60px"},disabled:!!(n||{}).disabled,onClick:!(n||{}).disabled&&t},"max"))))},V=function(e){var t=e.onMax,n=e.inputProps,a=Object(u.a)(e,z);return d.createElement(_,null,d.createElement(h.a.Item,a,d.createElement(p.a,Object.assign({type:"number",prefix:d.createElement("img",{src:E.a.logo,alt:"",width:16,height:16}),addonAfter:d.createElement(L,{disabled:!!(n||{}).disabled,onClick:!(n||{}).disabled&&t},"max")},n))))},H=function(e){var t=e.onScan,n=e.loadWithCameraOpen,a=e.inputProps,r=Object(u.a)(e,R);return d.createElement(_,null,d.createElement(h.a.Item,r,d.createElement(p.a,Object.assign({prefix:d.createElement(g.k,null),autoComplete:"off",addonAfter:d.createElement(B,{loadWithCameraOpen:n,onScan:t})},a))))},Y=function(e){var t=e.inputProps,n=Object(u.a)(e,U);return d.createElement(_,null,d.createElement(h.a.Item,n,d.createElement(J,Object.assign({prefix:d.createElement(g.k,null),autoComplete:"off"},t))))},G=function(e){var t=e.inputProps,n=Object(u.a)(e,A);return d.createElement(_,null,d.createElement(h.a.Item,n,d.createElement(p.a,Object.assign({prefix:d.createElement(g.k,null),autoComplete:"off",readOnly:!0},t))))},K=function(e){var t=e.inputProps,n=Object(u.a)(e,T);return d.createElement(_,null,d.createElement(h.a.Item,n,d.createElement(p.a,Object.assign({prefix:d.createElement(g.h,null),autoComplete:"off"},t))))},X=function(e){var t=e.inputProps,n=Object(u.a)(e,M),a=F.b[0].imageUrl;return d.createElement(_,null,d.createElement(h.a.Item,n,d.createElement(p.a,Object.assign({style:{width:"60%",textAlign:"left"},type:"number",step:.01,precision:2,prefix:d.createElement("img",{src:a,alt:"",width:16,height:16})},t))))},$=function(e){for(var t=b.a.Option,n=[],a=Object.keys(E.a.fiatCurrencies),r=0;r<a.length;r+=1){var o={};o.value=E.a.fiatCurrencies[a[r]].slug,o.label="".concat(E.a.fiatCurrencies[a[r]].name," (").concat(E.a.fiatCurrencies[a[r]].symbol,")"),n.push(o)}var c=n.map((function(e){return d.createElement(t,{key:e.value,value:e.value,className:"selectedCurrencyOption"},e.label)}));return d.createElement(b.a,Object.assign({className:"select-after",style:{width:"100%"}},e),c)}},865:function(e,t,n){"use strict";t.a=n.p+"static/media/checkout_icon.bd1106d2.svg"},866:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return x})),n.d(t,"f",(function(){return w})),n.d(t,"h",(function(){return v})),n.d(t,"d",(function(){return k})),n.d(t,"g",(function(){return O})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return y}));var a,r,o,c,i,l,s,u,m,d,f=n(37),p=n(36),b=p.d.div(a||(a=Object(f.a)(["\n\tdisplay: flex;\n\tmargin: 0 auto 1rem;\n\tflex-direction: column;\n\th4 {\n\t\tfont-size: 1rem;\n\t\tline-height: 1.5;\n\t\ttext-align: center;\n\n\t\tcolor: #8a8a8a;\n\t}\n\thr {\n\t\tdisplay: inline-flex;\n\t\theight: 1px;\n\t\twidth: 3rem;\n\t\tborder: 0;\n\t\tbackground: rgba(0, 0, 0, 0.1);\n\t}\n\n\th1 {\n\t\tfont-size: 1.5rem;\n\t\tline-height: 1.5;\n\t\tfont-weight: 800;\n\t\ttext-align: center;\n\n\t\tcolor: #000000;\n\t}\n"]))),h=p.d.div(r||(r=Object(f.a)(["\n\ttext-align: left;\n\tletter-spacing: -0.01em;\n"]))),g=p.d.div(o||(o=Object(f.a)(["\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tflex-direction: column;\n\ttext-align: left;\n\t.title {\n\t\tfont-weight: 600;\n\t\tfont-size: 1rem;\n\t\tmargin-bottom: 0.5rem;\n\t\tline-height: 1.25;\n\n\t\tcolor: #8a8a8a;\n\t}\n\n\t.offer-description {\n\t\tfont-weight: 400;\n\t\tfont-size: 1rem;\n\t\tline-height: 1.25;\n\t\tmin-height: 2.5rem;\n\t\tmargin: 0 0 0rem;\n\n\t\tcolor: #000000;\n\t}\n\n\t.merchant {\n\t\tdisplay: block;\n\t\tfont-weight: 400;\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.25;\n\n\t\tcolor: #000000;\n\t}\n"]))),x=p.d.div(c||(c=Object(f.a)(["\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tflex-direction: column;\n\n\ttext-align: left;\n\t.text-muted {\n\t\tdisplay: block;\n\t\tfont-weight: 400;\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.25;\n\t\tmargin-bottom: 0;\n\n\t\tcolor: #8a8a8a;\n\t}\n\n\t.text-muted-small {\n\t\tdisplay: block;\n\t\tfont-weight: 400;\n\t\tfont-size: 0.7rem;\n\t\tline-height: 1.25;\n\t\tmargin-bottom: 0;\n\n\t\tcolor: #8a8a8a;\n\t}\n\n\t.text-red {\n\t\tdisplay: block;\n\t\tfont-weight: 400;\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.25;\n\t\tmargin-bottom: 0;\n\n\t\tcolor: red;\n\t}\n"]))),w=p.d.h3(i||(i=Object(f.a)(["\n\tfont-weight: 600;\n\tfont-size: 1.125rem;\n\tmargin-bottom: 0.75rem;\n\tline-height: 1.25;\n\n\tcolor: #000;\n"]))),v=p.d.div(l||(l=Object(f.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tmargin: 0.75rem auto;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\t&.min-m {\n\t\tmargin: 0.25rem auto;\n\t}\n\t.bold {\n\t\tfont-weight: 800;\n\t}\n\t.gray {\n\t\tcolor: #8a8a8a;\n\t}\n\t.black {\n\t\tcolor: #000;\n\t}\n\n\t.key,\n\t.value {\n\t\tfont-size: 1rem;\n\t\tline-height: 1.25;\n\t}\n\n\t.value {\n\t\ttext-align: right;\n\t}\n"]))),k=p.d.img(s||(s=Object(f.a)(["\n\twidth: 2rem;\n\tdisplay: block;\n\tmargin: 0 auto 0.5rem;\n"]))),O=p.d.hr(u||(u=Object(f.a)(["\n\tdisplay: block;\n\theight: 1px;\n\twidth: 100%;\n\tborder: 0;\n\tmargin: 0.6rem 0;\n\tbackground: rgba(0, 0, 0, 0.1);\n"]))),j=p.d.div(m||(m=Object(f.a)(["\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground: rgba(0, 0, 0, 0.5);\n\ttransition: opacity 200ms;\n\tz-index: 3000;\n"]))),y=p.d.div(d||(d=Object(f.a)(["\n\tmargin: 30px auto;\n\tpadding: 20px;\n\tbackground: #fff;\n\tborder: 1px solid #666;\n\twidth: 80%;\n\tborder-radius: 6px;\n\tbox-shadow: 0 0 50px rgba(0, 0, 0, 0.5);\n\tposition: relative;\n\n\tp {\n\t\tcolor: #8a8a8a;\n\t\ttext-align: justify;\n  \t\ttext-justify: inter-word;\n\t}\n\n\t.first {\n\t\tmargin-top: 1em;\n\t}\n\n\t.key,\n\t.value {\n\t\tfont-size: 1rem;\n\t\tline-height: 1.25;\n\t}\n\t.black {\n\t\tcolor: #000;\n\t}\n"])))},974:function(e,t,n){"use strict";n.r(t),function(e){n(6);var a=n(3),r=n(7),o=n(17),c=n(19),i=n(8),l=n(0),s=n.n(l),u=n(51),m=n(90),d=n(815),f=n(802),p=n(977),b=n(155),h=n(309),g=n(196),x=n(13),w=n(239),v=n(310),k=n(807),O=n(42),j=n(811),y=n(57),E=n.n(y),S=n(195),C=n(14),N=n(59),P=n(865),D=n(866),B=C.script.SLP,F=function(t){var n,y,F,I,z=t.passLoadingStatus,R=s.a.useContext(m.c),U=R.wallet,A=R.fiatPrice,T=R.apiError,M=R.cashtabSettings,J=Object(O.d)(U),q=J.tokens,_=J.balances,L=["52b12c03466936e7e3b2dcfcff847338c53c611ba8ab74dd8e4dadf7ded12cf6","4075459e0ac841f234bc73fc4fe46fe5490be4ed98bc8ca3f9b898443a5a381a"],Q={dirty:!0,value:"",address:""},W=Object(l.useState)(Q),V=Object(i.a)(W,2),H=V[0],Y=V[1];if(H.token){var G=q.find((function(e){return e.tokenId===H.token.tokenId}));if(G){var K=G.balance.toString();I=(K/Math.pow(10,G.info.decimals)).toString()}else I="0"}var X=Object(l.useState)(null),$=Object(i.a)(X,2),Z=($[0],$[1],Object(l.useState)(!1)),ee=Object(i.a)(Z,2),te=ee[0],ne=(ee[1],Object(l.useState)(!1)),ae=Object(i.a)(ne,2),re=ae[0],oe=(ae[1],Object(l.useState)(x.a.ticker)),ce=Object(i.a)(oe,2),ie=ce[0],le=(ce[1],Object(l.useState)(!1)),se=Object(i.a)(le,2),ue=se[0],me=se[1],de=Object(l.useState)(!1),fe=Object(i.a)(de,2),pe=fe[0],be=fe[1],he=Object(l.useState)(!1),ge=Object(i.a)(he,2),xe=ge[0],we=ge[1],ve=Object(l.useState)(0),ke=Object(i.a)(ve,2),Oe=ke[0],je=(ke[1],Object(l.useState)(null)),ye=Object(i.a)(je,2),Ee=(ye[0],ye[1]),Se=Object(l.useState)(!1),Ce=Object(i.a)(Se,2),Ne=(Ce[0],Ce[1]),Pe=[].concat(Object(c.a)(x.a.prefixes),Object(c.a)(x.a.tokenPrefixes)),De=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Be=Object(u.g)(),Fe=Object(h.a)(),Ie=Fe.getBcashRestUrl,ze=Fe.sendBip70,Re=Fe.getPostage;function Ue(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(o.a)(Object(r.a)().mark((function t(n){var a,o,c,i,l,s,u,m,d,f,p,b,h,g,x;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(a={},"ecash"!==n.type){t.next=10;break}c=C.Script.fromRaw(e.from(n.outputs[0].script)).getAddress().toString(),i=n.outputs.reduce((function(e,t){return e+t.value}),0),a.address=c,a.value=Object(O.c)(i),t.next=44;break;case 10:if("etoken"!==n.type){t.next=44;break}if(!(l=B.fromRaw(e.from(n.outputs[0].script))).isValidSlp()){t.next=44;break}if(s=l.getData(4),"SEND"!==l.getType()){t.next=26;break}if(!H.token){t.next=20;break}if(f=(Number(I)-Number(H.value)).toFixed(H.token.decimals),!L.includes(null===(d=H.token)||void 0===d?void 0:d.tokenId)){t.next=20;break}if(!(f<0)){t.next=20;break}return t.abrupt("return",Be.push("/checkout"));case 20:p=C.Script.fromRaw(e.from(n.outputs[1].script)).getAddress().toString(),b=E.a.decode(p),u=E.a.encode("etoken",b.type,b.hash),m=l.getRecords(s),t.next=35;break;case 26:if("BURN"!==l.getType()){t.next=34;break}return u="**BURN**",m=[{value:l.getData(5)}],t.next=31,Re(s.toString("hex"));case 31:o=t.sent,t.next=35;break;case 34:throw new Error("Unsupported SLP transaction type: ".concat(l.getType()));case 35:return h=m.reduce((function(t,n){return t.add(N.U64.fromBE(e.from(n.value)))}),N.U64.fromInt(0)),console.log("totalBase",h),t.next=39,fetch("".concat(Ie(),"/token/").concat(s.toString("hex"))).then((function(e){return e.json()}));case 39:g=t.sent,a.address=u,x=h.toInt()/Math.pow(10,g.decimals),a.value="".concat(x),a.token=g;case 44:Y(a),o&&(Ee(o),Ne(!0));case 46:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Te(e,t){var n;z(!1),n=e.error||e.message?/Could not communicate with full node or other external service/.test(e.error)?"Could not communicate with API. Please try again.":e.error&&e.error.includes("too-long-mempool-chain, too many unconfirmed ancestors [limit: 50] (code 64)")?"The ".concat(x.a.ticker," you are trying to send has too many unconfirmed ancestors to send (limit 50). Sending will be possible after a block confirmation. Try again in about 10 minutes."):e.message||e.error||JSON.stringify(e):"Transaction failed: no response from ".concat(Ie(),"."),Object(g.b)(e,n,"Sending ".concat(t))}function Me(){return(Me=Object(o.a)(Object(r.a)().mark((function e(){var t,n,o,c,i,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y(Object(a.a)(Object(a.a)({},H),{},{dirty:!1})),t=ue.paymentDetails,n=ue.type,t){e.next=4;break}return e.abrupt("return");case 4:return Object(w.a)("SendBip70.js","SendBip70",n),z(!0),e.prev=6,e.next=9,ze(U,t,x.a.defaultFee,!1);case 9:if(o=e.sent,"ecash"==n?Object(g.e)(o):Object(g.f)(o),!t.merchantData){e.next=15;break}if(i=JSON.parse(t.merchantData.toString()),null===(c=i.callback)||void 0===c||!c.success_url){e.next=15;break}return e.abrupt("return",window.location.assign(i.callback.success_url));case 15:return e.next=17,De(3e3);case 17:return z(!1),window.history.replaceState(null,"",window.location.origin),e.abrupt("return",Be.push("/wallet"));case 22:e.prev=22,e.t0=e.catch(6),l="etoken"==n?x.a.tokenTicker:x.a.ticker,Te(e.t0,l);case 26:Y(Q),z(!1);case 28:case"end":return e.stop()}}),e,null,[[6,22]])})))).apply(this,arguments)}Object(l.useEffect)((function(){z(!1)}),[_.totalBalance]),Object(l.useEffect)((function(){if(H.token){var e,t=(Number(I)-Number(H.value)).toFixed(H.token.decimals);if(L.includes(null===(e=H.token)||void 0===e?void 0:e.tokenId)&&t<0&&"**BURN**"!=H.address)return Be.push("/checkout")}}),[I]),Object(l.useEffect)(Object(o.a)(Object(r.a)().mark((function e(){var t,n,a,o,c,i,l,s,u,m,d,f;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.Path1899){e.next=2;break}return e.abrupt("return",Be.push("/wallet"));case 2:if(z(!0),window.location&&window.location.hash&&(""!=window.location.search||"#/sendBip70"!==window.location.hash)){e.next=6;break}return z(!1),e.abrupt("return");case 6:t=""==window.location.search?window.location.hash:window.location.search,n=t.indexOf("?"),a=t.slice(n+1).split("&"),o={},c=0;case 11:if(!(c<a.length)){e.next=24;break}if(i=a[c].indexOf("="),"mintauth"!=(l=a[c].slice(0,i).toLowerCase())){e.next=17;break}return console.log("has mintauth"),e.abrupt("return",Be.push("/selfMint"));case 17:s=a[c].slice(i+1),u=decodeURIComponent(s),m=u.split(":")[0],"uri"===l&&Pe.includes(m)&&(d=u.split("?")[1],(f=Object(S.b)(d))&&(o.type=m.toLowerCase(),o.url=f));case 21:c+=1,e.next=11;break;case 24:if(console.log("prInfo from page params",o),!o.url||!o.type){e.next=41;break}return e.prev=26,e.next=29,Object(S.a)(o.url,o.type);case 29:o.paymentDetails=e.sent.paymentDetails,o.paymentDetails.merchantDataJson=JSON.parse(o.paymentDetails.merchantData.toString()),e.next=41;break;case 33:return e.prev=33,e.t0=e.catch(26),Object(g.b)(e.t0,"Failed to fetch invoice. May be expired or invalid","Fetching invoice: ".concat(o.url)),e.next=38,De(3e3);case 38:return z(!1),window.history.replaceState(null,"",window.location.origin),e.abrupt("return",Be.push("/wallet"));case 41:return me(o),o.paymentDetails.type=o.type,e.next=45,Ue(o.paymentDetails);case 45:z(!1);case 46:case"end":return e.stop()}}),e,null,[[26,33]])}))),[]);var Je=function(){return H.token?Number(I)>=Number(H.value):!!H&&Number(_.totalBalance)>Number(H.value)},qe="";null===A||isNaN(H.value)||(ie===x.a.ticker?(qe="".concat((A*Number(H.value)).toFixed(2)),qe=Object(v.b)(Number(qe)),qe="".concat(M?"".concat(x.a.fiatCurrencies[M.fiatCurrency].symbol," "):"$ "," ").concat(qe," ").concat(M&&M.fiatCurrency?M.fiatCurrency.toUpperCase():"USD")):qe="".concat(H.value?Object(v.b)(Number(Object(v.a)(H.value,A))):Object(v.b)(0)," ").concat(x.a.ticker));var _e=null===A&&"XEC"!==ie,Le=I||_.totalBalance,Qe=(null===(n=H.token)||void 0===n?void 0:n.ticker)||x.a.ticker,We=(null===(y=ue.paymentDetails)||void 0===y||null===(F=y.merchantDataJson)||void 0===F?void 0:F.ipn_body)||{},Ve=We.invoice,He=We.merchant_name,Ye=We.offer_description,Ge=We.offer_name;return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.a,{title:"Confirm Send",visible:pe,onOk:function(){be(!1),function(){Me.apply(this,arguments)}()},onCancel:function(){be(!1)}},s.a.createElement("p",null,"Are you sure you want to send ",H.value," ",Qe," to settle this payment request?")),s.a.createElement(f.a,{title:"Purchase ".concat(Qe),visible:xe,onOk:function(){we(!1);var e=window.location.href.replace(window.location.hash,"");return window.location.assign("https://bux.digital/?cbxamount=".concat(Oe.toString())+"&cbxaddress=".concat(U.Path1899.slpAddress)+"&cbxcallback=".concat(encodeURIComponent(e))+"#payment")},onCancel:function(){we(!1)}},s.a.createElement("p",null,"You have insufficient funds. Do you want to purchase "," ",s.a.createElement("strong",null,Oe," ",Qe," "),"in order to be able to settle this payment request?")),s.a.createElement(D.c,null,s.a.createElement(D.d,{src:P.a}),s.a.createElement("h4",null,"CHECKOUT"),s.a.createElement("hr",null),Ge&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",null,Ge))),s.a.createElement(D.e,null,s.a.createElement(D.i,null,s.a.createElement("h3",{className:"title"},"Payment Request Details:"),Ye&&s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"offer-description"},Ye),s.a.createElement("span",{className:"merchant"},"From ",He))||ue&&ue.paymentDetails&&s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"offer-description"},ue.paymentDetails.memo))),s.a.createElement(D.g,null),s.a.createElement(D.j,null,!Je()&&s.a.createElement("p",{className:"text-muted"},"You have insufficient funds in this wallet"),s.a.createElement(D.h,{className:"min-m"},s.a.createElement("span",{className:"key black"},"Ready To Send"),s.a.createElement("span",{className:"value black bold"},H.value," ",Qe)),s.a.createElement("p",{className:"text-muted"},"In order to settle this payment request")),s.a.createElement(D.g,null),s.a.createElement(D.j,null,s.a.createElement(D.h,{className:"min-m"},s.a.createElement("span",{className:"key black"},"Balance"),s.a.createElement("div",{className:"value"},s.a.createElement("div",{className:"black bold"},Le," ",Qe)))),s.a.createElement(D.g,null),s.a.createElement(p.a,null,ue&&ue.paymentDetails&&s.a.createElement(s.a.Fragment,null,s.a.createElement(d.b,{validateStatus:te?"error":"",help:te||"",inputProps:{placeholder:"".concat(x.a.ticker," Address"),name:"address",required:!0,value:H.address}}),!H.token&&_e&&s.a.createElement(k.a,null,"Error fetching fiat price. Setting send by"," ",x.a.fiatCurrencies[M.fiatCurrency].slug.toUpperCase()," disabled"),!H.token&&s.a.createElement(k.d,null,""!==qe&&"="," ",qe)),He&&s.a.createElement(s.a.Fragment,null,s.a.createElement(D.h,null,s.a.createElement("span",{className:"key gray"},"Merchant:"),s.a.createElement("span",{className:"value gray"},He))),Ve&&s.a.createElement(s.a.Fragment,null,s.a.createElement(D.h,null,s.a.createElement("span",{className:"key gray"},"Invoice:"),s.a.createElement("span",{className:"value gray"},Ve))),(He||Ve)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(D.g,null)),s.a.createElement("div",null,!Je()||T||re||te||!ue?s.a.createElement(b.a,null,"Send"):s.a.createElement(b.c,{onClick:function(){be(!0)}},"Send")),T&&s.a.createElement(j.a,null))))};F.defaultProps={passLoadingStatus:function(e){console.log(e)}},t.default=F}.call(this,n(4).Buffer)}}]);
//# sourceMappingURL=13.9ea5b7d4.chunk.js.map